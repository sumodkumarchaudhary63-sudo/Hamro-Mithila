<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hamro Mithila - मिथिलाको विश्वसनीय समाचार पोर्टल</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Mukta:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Mukta', sans-serif; }
        .ticker-wrap { overflow: hidden; }
        .ticker { display: inline-block; white-space: nowrap; animation: ticker 30s linear infinite; }
        .ticker:hover { animation-play-state: paused; }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .news-card:hover .news-img { transform: scale(1.05); }
        .news-img { transition: transform 0.3s ease; }
        .category-badge { font-size: 11px; }
        .modal { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; }
        .toast { animation: slideIn 0.3s ease, slideOut 0.3s ease 2.7s; }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes slideOut { from { transform: translateX(0); } to { transform: translateX(100%); } }
        .sidebar-link { transition: all 0.2s ease; }
        .sidebar-link:hover, .sidebar-link.active { background: rgba(255,255,255,0.1); border-left: 3px solid #fbbf24; }
        .user-avatar { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-weight: bold; }
        .breaking-item { cursor: pointer; transition: color 0.2s; }
        .breaking-item:hover { color: #dc2626; text-decoration: underline; }
        .ad-banner { transition: transform 0.2s; }
        .ad-banner:hover { transform: scale(1.02); }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-4 right-4 z-[100] space-y-2"></div>

    <!-- Admin Login Modal -->
    <div id="loginModal" class="modal fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center">
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden relative">
            <div class="bg-gradient-to-r from-red-700 to-red-600 p-6 text-center">
                <div class="w-20 h-20 bg-white/20 rounded-full mx-auto flex items-center justify-center mb-3">
                    <i class="fas fa-user-shield text-white text-3xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-white">Admin Login</h2>
                <p class="text-red-200 text-sm">Hamro Mithila News Portal</p>
            </div>
            <form id="loginForm" class="p-6" onsubmit="handleLogin(event)">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2"><i class="fas fa-user mr-2"></i>Username</label>
                    <input type="text" id="loginUsername" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500 transition" placeholder="Enter username" required>
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2"><i class="fas fa-lock mr-2"></i>Password</label>
                    <input type="password" id="loginPassword" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500 transition" placeholder="Enter password" required>
                </div>
                <button type="submit" class="w-full bg-gradient-to-r from-red-600 to-red-700 text-white py-3 rounded-lg font-bold hover:from-red-700 hover:to-red-800 transition flex items-center justify-center gap-2">
                    <i class="fas fa-sign-in-alt"></i> Login to Dashboard
                </button>
                <div class="mt-4 p-3 bg-gray-100 rounded-lg text-center">
                    <p class="text-xs text-gray-600"><i class="fas fa-info-circle mr-1"></i>Default Credentials:</p>
                    <p class="text-sm font-mono mt-1"><strong>Admin:</strong> admin / admin123</p>
                    <p class="text-sm font-mono"><strong>Editor:</strong> editor / editor123</p>
                </div>
            </form>
            <button onclick="closeLoginModal()" class="absolute top-4 right-4 text-white/70 hover:text-white">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="fixed inset-0 z-50 hidden">
        <div class="flex h-full">
            <!-- Sidebar -->
            <div class="w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white flex flex-col">
                <div class="p-4 border-b border-gray-700">
                    <div class="flex items-center gap-3">
                        <div class="relative w-11 h-11">
                            <div class="absolute inset-0 rounded-xl overflow-hidden border-2 border-red-500 bg-gradient-to-br from-red-600 to-red-800">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" alt="Logo" class="w-full h-full object-cover opacity-90">
                                <div class="absolute inset-0 bg-gradient-to-t from-red-800/60 to-transparent"></div>
                            </div>
                            <div class="absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-om text-red-700 text-[7px]"></i>
                            </div>
                        </div>
                        <div>
                            <h1 class="font-bold text-white">Hamro Mithila</h1>
                            <p class="text-xs text-gray-400">Admin Panel</p>
                        </div>
                    </div>
                </div>
                <div class="p-4 border-b border-gray-700">
                    <div class="flex items-center gap-3">
                        <div class="user-avatar bg-red-500 text-white" id="currentUserAvatar">A</div>
                        <div>
                            <p class="font-medium text-sm" id="currentUserName">Admin</p>
                            <p class="text-xs text-gray-400" id="currentUserRole">Administrator</p>
                        </div>
                    </div>
                </div>
                <nav class="flex-1 p-4 space-y-1 overflow-y-auto">
                    <a href="#" onclick="switchDashboardTab('overview')" class="sidebar-link active flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="overview">
                        <i class="fas fa-tachometer-alt w-5"></i> Dashboard
                    </a>
                    <a href="#" onclick="switchDashboardTab('news')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="news">
                        <i class="fas fa-newspaper w-5"></i> News Articles
                    </a>
                    <a href="#" onclick="switchDashboardTab('categories')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="categories">
                        <i class="fas fa-folder w-5"></i> Categories
                    </a>
                    <a href="#" onclick="switchDashboardTab('breaking')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="breaking">
                        <i class="fas fa-bolt w-5"></i> Breaking News
                    </a>
                    <a href="#" onclick="switchDashboardTab('ads')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="ads">
                        <i class="fas fa-ad w-5"></i> Advertisements
                    </a>
                    <a href="#" onclick="switchDashboardTab('social')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg admin-only" data-tab="social">
                        <i class="fas fa-share-alt w-5"></i> Social Media
                    </a>
                    <a href="#" onclick="switchDashboardTab('logo')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg admin-only" data-tab="logo">
                        <i class="fas fa-image w-5"></i> Logo & Branding
                    </a>
                    <a href="#" onclick="switchDashboardTab('media')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="media">
                        <i class="fas fa-images w-5"></i> Media Library
                    </a>
                    <a href="#" onclick="switchDashboardTab('users')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg admin-only" data-tab="users">
                        <i class="fas fa-users w-5"></i> Team Members
                    </a>
                    <a href="#" onclick="switchDashboardTab('contact')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg admin-only" data-tab="contact">
                        <i class="fas fa-address-book w-5"></i> Contact Info
                    </a>
                    <a href="#" onclick="switchDashboardTab('footer')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="footer">
                        <i class="fas fa-shoe-prints w-5"></i> Footer Settings
                    </a>
                    <a href="#" onclick="switchDashboardTab('activity')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="activity">
                        <i class="fas fa-history w-5"></i> Activity Log
                    </a>
                    <a href="#" onclick="switchDashboardTab('settings')" class="sidebar-link flex items-center gap-3 px-4 py-3 rounded-lg" data-tab="settings">
                        <i class="fas fa-cog w-5"></i> Settings
                    </a>
                </nav>
                <div class="p-4 border-t border-gray-700">
                    <button onclick="logout()" class="w-full flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 py-2 rounded-lg transition">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="flex-1 bg-gray-100 overflow-y-auto">
                <div class="bg-white shadow-sm px-6 py-4 flex justify-between items-center sticky top-0 z-10">
                    <h2 class="text-xl font-bold text-gray-800" id="dashboardTitle">Dashboard Overview</h2>
                    <div class="flex items-center gap-4">
                        <a href="#" onclick="closeDashboard()" class="text-gray-600 hover:text-red-600 flex items-center gap-2">
                            <i class="fas fa-external-link-alt"></i> View Site
                        </a>
                        <span class="text-sm text-gray-500" id="dashboardTime"></span>
                    </div>
                </div>

                <div class="p-6">
                    <!-- Overview Tab -->
                    <div id="dash-overview" class="dashboard-tab">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6">
                            <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-5 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-blue-100 text-sm">Total Articles</p>
                                        <p class="text-2xl font-bold mt-1" id="statArticles2">0</p>
                                    </div>
                                    <div class="bg-white/20 p-2 rounded-lg"><i class="fas fa-newspaper text-xl"></i></div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-green-500 to-green-600 text-white p-5 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-green-100 text-sm">Categories</p>
                                        <p class="text-2xl font-bold mt-1" id="statCategories2">0</p>
                                    </div>
                                    <div class="bg-white/20 p-2 rounded-lg"><i class="fas fa-folder text-xl"></i></div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-5 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-purple-100 text-sm">Total Views</p>
                                        <p class="text-2xl font-bold mt-1" id="statViews2">0</p>
                                    </div>
                                    <div class="bg-white/20 p-2 rounded-lg"><i class="fas fa-eye text-xl"></i></div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-orange-500 to-orange-600 text-white p-5 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-orange-100 text-sm">Team Members</p>
                                        <p class="text-2xl font-bold mt-1" id="statUsers2">0</p>
                                    </div>
                                    <div class="bg-white/20 p-2 rounded-lg"><i class="fas fa-users text-xl"></i></div>
                                </div>
                            </div>
                            <div class="bg-gradient-to-br from-pink-500 to-pink-600 text-white p-5 rounded-xl shadow-lg">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <p class="text-pink-100 text-sm">Active Ads</p>
                                        <p class="text-2xl font-bold mt-1" id="statAds2">0</p>
                                    </div>
                                    <div class="bg-white/20 p-2 rounded-lg"><i class="fas fa-ad text-xl"></i></div>
                                </div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <i class="fas fa-clock text-red-500"></i> Recent Articles
                                </h3>
                                <div class="space-y-3" id="recentArticles"></div>
                            </div>
                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <i class="fas fa-history text-red-500"></i> Recent Activity
                                </h3>
                                <div class="space-y-3" id="recentActivity"></div>
                            </div>
                        </div>
                    </div>

                    <!-- News Tab -->
                    <div id="dash-news" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4">
                                <input type="text" id="newsSearch" placeholder="Search articles..." class="border rounded-lg px-4 py-2 w-full md:w-64" onkeyup="filterNewsTable()">
                                <button onclick="openNewsForm()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2">
                                    <i class="fas fa-plus"></i> Add New Article
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50 text-left">
                                            <th class="px-4 py-3 font-semibold text-gray-600">Image</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Title</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Category</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Author</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Status</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="newsTableBody2" class="divide-y"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Categories Tab -->
                    <div id="dash-categories" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold">Manage Categories</h3>
                                <button onclick="openCategoryForm()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2">
                                    <i class="fas fa-plus"></i> Add Category
                                </button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="categoriesList2"></div>
                        </div>
                    </div>

                    <!-- Breaking News Tab -->
                    <div id="dash-breaking" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold">Breaking News Ticker</h3>
                                <button onclick="openBreakingForm()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2">
                                    <i class="fas fa-plus"></i> Add Breaking News
                                </button>
                            </div>
                            <p class="text-sm text-gray-500 mb-4"><i class="fas fa-info-circle mr-1"></i> Link breaking news to articles so users can click and read full story.</p>
                            <div class="space-y-3" id="breakingNewsList2"></div>
                        </div>
                    </div>

                    <!-- Logo & Branding Tab -->
                    <div id="dash-logo" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-red-700 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-palette text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-gray-800">Logo & Branding</h3>
                                    <p class="text-gray-500">Upload logo image and customize newspaper title</p>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-5 mb-6">
                                <div class="flex items-start gap-4">
                                    <div class="w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-info text-white text-xl"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-green-800 text-lg mb-2">How to Upload Logo</h4>
                                        <ul class="text-green-700 space-y-1">
                                            <li><i class="fas fa-check-circle mr-2"></i><strong>Upload from Device:</strong> Click the upload box and select image from your computer/phone (up to 150MB)</li>
                                            <li><i class="fas fa-check-circle mr-2"></i><strong>Paste URL:</strong> Enter direct image URL from any image hosting service</li>
                                            <li><i class="fas fa-check-circle mr-2"></i><strong>Supported Formats:</strong> JPG, PNG, GIF, WebP, SVG, ICO</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <form onsubmit="saveLogoAndBranding(event)">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <!-- Logo Upload Section -->
                                    <div class="bg-gray-50 rounded-xl p-6 border-2 border-dashed border-gray-300">
                                        <h4 class="font-bold text-gray-800 mb-4 text-lg flex items-center gap-2">
                                            <i class="fas fa-image text-red-500"></i> Upload Logo Image
                                        </h4>
                                        
                                        <div class="space-y-5">
                                            <!-- Upload from Device -->
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <i class="fas fa-cloud-upload-alt text-blue-500 mr-2"></i>Option 1: Upload from Device (up to 150MB)
                                                </label>
                                                <label class="border-2 border-dashed border-blue-300 rounded-xl p-8 text-center cursor-pointer hover:border-red-500 hover:bg-red-50 transition-all block group bg-white">
                                                    <input type="file" id="logoUpload" accept="image/*" class="hidden" onchange="handleLogoUpload(this)">
                                                    <div class="w-20 h-20 bg-gradient-to-br from-red-100 to-red-200 rounded-full mx-auto flex items-center justify-center mb-4 group-hover:from-red-200 group-hover:to-red-300 transition">
                                                        <i class="fas fa-cloud-upload-alt text-4xl text-red-500"></i>
                                                    </div>
                                                    <p class="text-lg font-medium text-gray-700">Click here to upload logo</p>
                                                    <p class="text-sm text-gray-400 mt-2">Drag & drop or click to browse</p>
                                                    <p class="text-xs text-gray-400 mt-1">JPG, PNG, GIF, WebP, SVG • Max 150MB</p>
                                                </label>
                                            </div>
                                            
                                            <!-- Divider -->
                                            <div class="flex items-center gap-4">
                                                <div class="flex-1 h-px bg-gray-300"></div>
                                                <span class="text-gray-500 font-bold px-2 bg-gray-50">OR</span>
                                                <div class="flex-1 h-px bg-gray-300"></div>
                                            </div>
                                            
                                            <!-- URL Input -->
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <i class="fas fa-link text-purple-500 mr-2"></i>Option 2: Paste Image URL
                                                </label>
                                                <div class="flex gap-2">
                                                    <input type="url" id="logoUrl" class="flex-1 border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500 text-lg" placeholder="https://example.com/your-logo.png" onchange="previewLogoUrl(this.value)">
                                                    <button type="button" onclick="previewLogoUrl(document.getElementById('logoUrl').value)" class="bg-purple-500 hover:bg-purple-600 text-white px-5 py-2 rounded-lg transition">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <!-- Current Logo Preview -->
                                            <div class="bg-white rounded-xl p-5 border-2 border-gray-200 shadow-inner">
                                                <p class="text-gray-600 mb-4 font-bold text-center text-lg">
                                                    <i class="fas fa-eye text-green-500 mr-2"></i>Current Logo Preview
                                                </p>
                                                <div class="flex items-center justify-center">
                                                    <div class="relative w-32 h-32">
                                                        <div class="absolute inset-0 rounded-2xl overflow-hidden border-4 border-red-500 shadow-xl">
                                                            <img id="logoPreviewImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" alt="Logo Preview" class="w-full h-full object-cover">
                                                            <div class="absolute inset-0 bg-gradient-to-t from-red-700/60 to-red-500/30" id="logoOverlay"></div>
                                                        </div>
                                                        <div class="absolute inset-0 flex items-center justify-center">
                                                            <span id="logoPreviewText" class="text-white font-bold text-2xl drop-shadow-lg" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">हमि</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flex justify-center gap-4 mt-5">
                                                    <button type="button" onclick="resetLogo()" class="text-red-500 hover:text-red-700 font-medium flex items-center gap-2 px-4 py-2 border border-red-300 rounded-lg hover:bg-red-50 transition">
                                                        <i class="fas fa-undo"></i> Reset to Default
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Title & Branding Section -->
                                    <div class="bg-gray-50 rounded-xl p-6 border">
                                        <h4 class="font-bold text-gray-800 mb-4 text-lg flex items-center gap-2">
                                            <i class="fas fa-heading text-red-500"></i> Newspaper Title & Text
                                        </h4>
                                        
                                        <div class="space-y-5">
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <i class="fas fa-newspaper text-gray-500 mr-2"></i>Newspaper Title (English)
                                                </label>
                                                <input type="text" id="newspaperTitle" class="w-full border-2 rounded-lg px-4 py-3 text-xl font-bold focus:outline-none focus:border-red-500" placeholder="Hamro Mithila" oninput="updateLivePreview()">
                                            </div>
                                            
                                            <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label class="block text-gray-700 font-medium mb-2">
                                                        <i class="fas fa-text-height text-gray-500 mr-2"></i>Title Font
                                                    </label>
                                                    <select id="titleFont" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" onchange="updateLivePreview()">
                                                        <option value="'Mukta', sans-serif">Mukta (Default)</option>
                                                        <option value="'Arial', sans-serif">Arial</option>
                                                        <option value="'Georgia', serif">Georgia</option>
                                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                                        <option value="'Verdana', sans-serif">Verdana</option>
                                                        <option value="'Tahoma', sans-serif">Tahoma</option>
                                                        <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                                                        <option value="'Impact', sans-serif">Impact</option>
                                                        <option value="'Courier New', monospace">Courier New</option>
                                                        <option value="'Palatino', serif">Palatino</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-700 font-medium mb-2">
                                                        <i class="fas fa-palette text-gray-500 mr-2"></i>Title Color
                                                    </label>
                                                    <div class="flex gap-2">
                                                        <input type="color" id="titleColor" value="#b91c1c" class="w-16 h-12 border-2 rounded-lg cursor-pointer" onchange="updateLivePreview()">
                                                        <input type="text" id="titleColorText" value="#b91c1c" class="flex-1 border-2 rounded-lg px-3 focus:outline-none focus:border-red-500 uppercase" oninput="syncTitleColor(this.value)">
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <i class="fas fa-font text-gray-500 mr-2"></i>Logo Text (Short/Nepali)
                                                </label>
                                                <input type="text" id="logoText" class="w-full border-2 rounded-lg px-4 py-3 text-xl font-bold focus:outline-none focus:border-red-500" placeholder="हमि" oninput="updateLivePreview()">
                                                <p class="text-xs text-gray-500 mt-1">This short text appears on the logo image</p>
                                            </div>
                                            
                                            <div>
                                                <label class="block text-gray-700 font-medium mb-2">
                                                    <i class="fas fa-quote-left text-gray-500 mr-2"></i>Tagline (Nepali)
                                                </label>
                                                <input type="text" id="newspaperTagline" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="मिथिलाको विश्वसनीय समाचार" oninput="updateLivePreview()">
                                            </div>
                                            
                                            <div class="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label class="block text-gray-700 font-medium mb-2">
                                                        <i class="fas fa-text-height text-gray-500 mr-2"></i>Tagline Font
                                                    </label>
                                                    <select id="taglineFont" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" onchange="updateLivePreview()">
                                                        <option value="'Mukta', sans-serif">Mukta (Default)</option>
                                                        <option value="'Arial', sans-serif">Arial</option>
                                                        <option value="'Georgia', serif">Georgia</option>
                                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                                        <option value="'Verdana', sans-serif">Verdana</option>
                                                        <option value="'Tahoma', sans-serif">Tahoma</option>
                                                        <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                                                        <option value="'Palatino', serif">Palatino</option>
                                                    </select>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-700 font-medium mb-2">
                                                        <i class="fas fa-palette text-gray-500 mr-2"></i>Tagline Color
                                                    </label>
                                                    <div class="flex gap-2">
                                                        <input type="color" id="taglineColor" value="#6b7280" class="w-16 h-12 border-2 rounded-lg cursor-pointer" onchange="updateLivePreview()">
                                                        <input type="text" id="taglineColorText" value="#6b7280" class="flex-1 border-2 rounded-lg px-3 focus:outline-none focus:border-red-500 uppercase" oninput="syncTaglineColor(this.value)">
                                                    </div>
                                                </div>
                                            </div>
                                            
                                            <div class="flex items-center gap-3 p-4 bg-white rounded-lg border-2">
                                                <input type="checkbox" id="showLogoOverlay" class="w-6 h-6 text-red-600 rounded cursor-pointer" checked onchange="updateLivePreview()">
                                                <label for="showLogoOverlay" class="font-medium cursor-pointer flex-1 text-lg">Show red overlay on logo</label>
                                            </div>
                                            
                                            <!-- Live Header Preview -->
                                            <div class="bg-white rounded-xl p-5 border-2 border-gray-200 shadow-inner">
                                                <p class="text-gray-600 mb-4 font-bold text-center">
                                                    <i class="fas fa-desktop text-blue-500 mr-2"></i>Live Header Preview
                                                </p>
                                                <div class="bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg p-5 flex items-center gap-5 border">
                                                    <div class="relative w-16 h-16 flex-shrink-0">
                                                        <div class="absolute inset-0 rounded-lg overflow-hidden border-2 border-red-600 shadow-lg">
                                                            <img id="headerPreviewLogo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" class="w-full h-full object-cover">
                                                            <div class="absolute inset-0 bg-gradient-to-t from-red-700/80 to-red-600/40" id="headerPreviewOverlay"></div>
                                                        </div>
                                                        <div class="absolute inset-0 flex items-center justify-center">
                                                            <span id="headerPreviewLogoText" class="text-white font-bold drop-shadow-lg" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">हमि</span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <h1 id="headerPreviewTitle" class="text-2xl font-bold text-red-700">Hamro Mithila</h1>
                                                        <p id="headerPreviewTagline" class="text-sm text-gray-500">मिथिलाको विश्वसनीय समाचार</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Save Button -->
                                <div class="mt-8 flex flex-wrap items-center gap-4 p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-200">
                                    <button type="submit" class="bg-gradient-to-r from-red-600 to-red-700 text-white px-10 py-4 rounded-xl hover:from-red-700 hover:to-red-800 flex items-center gap-3 font-bold text-lg shadow-xl transition-all hover:shadow-2xl">
                                        <i class="fas fa-save text-xl"></i> Save Logo & Branding
                                    </button>
                                    <div class="flex items-center gap-2 text-green-700">
                                        <i class="fas fa-check-circle text-2xl"></i>
                                        <p class="font-medium">Changes will apply to website header and footer immediately!</p>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Media Library Tab -->
                    <div id="dash-media" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold">Media Library</h3>
                                <button onclick="openMediaUploadForm()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2">
                                    <i class="fas fa-upload"></i> Upload Image
                                </button>
                            </div>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <h4 class="font-bold text-blue-800 mb-2"><i class="fas fa-info-circle mr-2"></i>How to Add Images</h4>
                                <p class="text-sm text-blue-700 mb-2">Since this is a browser-based system, you can use free image hosting services:</p>
                                <ul class="text-sm text-blue-600 list-disc ml-5 space-y-1">
                                    <li><a href="https://imgbb.com/" target="_blank" class="underline hover:text-blue-800">ImgBB</a> - Free image hosting, get direct link</li>
                                    <li><a href="https://postimages.org/" target="_blank" class="underline hover:text-blue-800">PostImages</a> - Free, no registration required</li>
                                    <li><a href="https://imgur.com/" target="_blank" class="underline hover:text-blue-800">Imgur</a> - Popular image hosting</li>
                                    <li><a href="https://cloudinary.com/" target="_blank" class="underline hover:text-blue-800">Cloudinary</a> - Professional image hosting</li>
                                </ul>
                            </div>
                            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4" id="mediaLibrary"></div>
                        </div>
                    </div>

                    <!-- Social Media Tab -->
                    <div id="dash-social" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center gap-3 mb-6">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-share-alt text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Social Media Links</h3>
                                    <p class="text-sm text-gray-500">Add your news portal's official social media page links</p>
                                </div>
                            </div>
                            
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <div class="flex items-start gap-3">
                                    <i class="fas fa-info-circle text-blue-500 mt-1"></i>
                                    <div>
                                        <p class="text-sm text-blue-800 font-medium">How it works:</p>
                                        <p class="text-sm text-blue-700">Add your official social media page links below. These links will appear in the website header and the "हामीलाई फलो गर्नुहोस्" sidebar section. When visitors click on these icons, they will be redirected to your official pages.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <form onsubmit="saveSocialLinksFromTab(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Facebook -->
                                    <div class="border rounded-xl p-4 hover:shadow-md transition">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                                                <i class="fab fa-facebook-f text-white text-lg"></i>
                                            </div>
                                            <div>
                                                <label class="font-bold text-gray-800">Facebook Page</label>
                                                <p class="text-xs text-gray-500">Your official Facebook page</p>
                                            </div>
                                        </div>
                                        <input type="url" id="socialFacebook2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500" placeholder="https://facebook.com/HamroMithilaNews">
                                    </div>
                                    
                                    <!-- YouTube -->
                                    <div class="border rounded-xl p-4 hover:shadow-md transition">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center">
                                                <i class="fab fa-youtube text-white text-lg"></i>
                                            </div>
                                            <div>
                                                <label class="font-bold text-gray-800">YouTube Channel</label>
                                                <p class="text-xs text-gray-500">Your official YouTube channel</p>
                                            </div>
                                        </div>
                                        <input type="url" id="socialYoutube2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="https://youtube.com/@HamroMithilaNews">
                                    </div>
                                    
                                    <!-- Twitter -->
                                    <div class="border rounded-xl p-4 hover:shadow-md transition">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-10 h-10 bg-sky-500 rounded-lg flex items-center justify-center">
                                                <i class="fab fa-twitter text-white text-lg"></i>
                                            </div>
                                            <div>
                                                <label class="font-bold text-gray-800">Twitter / X</label>
                                                <p class="text-xs text-gray-500">Your official Twitter handle</p>
                                            </div>
                                        </div>
                                        <input type="url" id="socialTwitter2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-sky-500" placeholder="https://twitter.com/HamroMithila">
                                    </div>
                                    
                                    <!-- Instagram -->
                                    <div class="border rounded-xl p-4 hover:shadow-md transition">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-10 h-10 bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400 rounded-lg flex items-center justify-center">
                                                <i class="fab fa-instagram text-white text-lg"></i>
                                            </div>
                                            <div>
                                                <label class="font-bold text-gray-800">Instagram</label>
                                                <p class="text-xs text-gray-500">Your official Instagram page</p>
                                            </div>
                                        </div>
                                        <input type="url" id="socialInstagram2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-pink-500" placeholder="https://instagram.com/HamroMithila">
                                    </div>
                                    
                                    <!-- TikTok -->
                                    <div class="border rounded-xl p-4 hover:shadow-md transition">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-10 h-10 bg-black rounded-lg flex items-center justify-center">
                                                <i class="fab fa-tiktok text-white text-lg"></i>
                                            </div>
                                            <div>
                                                <label class="font-bold text-gray-800">TikTok</label>
                                                <p class="text-xs text-gray-500">Your official TikTok page</p>
                                            </div>
                                        </div>
                                        <input type="url" id="socialTiktok2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-gray-500" placeholder="https://tiktok.com/@HamroMithila">
                                    </div>
                                    
                                    <!-- LinkedIn -->
                                    <div class="border rounded-xl p-4 hover:shadow-md transition">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-10 h-10 bg-blue-700 rounded-lg flex items-center justify-center">
                                                <i class="fab fa-linkedin-in text-white text-lg"></i>
                                            </div>
                                            <div>
                                                <label class="font-bold text-gray-800">LinkedIn</label>
                                                <p class="text-xs text-gray-500">Your official LinkedIn page</p>
                                            </div>
                                        </div>
                                        <input type="url" id="socialLinkedin2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-blue-700" placeholder="https://linkedin.com/company/HamroMithila">
                                    </div>
                                </div>
                                
                                <div class="mt-6 flex items-center gap-4">
                                    <button type="submit" class="bg-gradient-to-r from-red-600 to-red-700 text-white px-8 py-3 rounded-lg hover:from-red-700 hover:to-red-800 flex items-center gap-2 font-bold shadow-lg">
                                        <i class="fas fa-save"></i> Save Social Media Links
                                    </button>
                                    <span class="text-sm text-gray-500"><i class="fas fa-eye mr-1"></i> Links will appear in header & sidebar for all visitors</span>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Preview Section -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
                            <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-eye text-green-500"></i> Preview - How it appears to visitors
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <p class="text-sm text-gray-600 mb-3 font-medium">Header Icons:</p>
                                    <div class="bg-red-700 text-white p-3 rounded-lg flex items-center gap-4">
                                        <a href="#" class="hover:text-red-200"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#" class="hover:text-red-200"><i class="fab fa-twitter"></i></a>
                                        <a href="#" class="hover:text-red-200"><i class="fab fa-youtube"></i></a>
                                        <a href="#" class="hover:text-red-200"><i class="fab fa-instagram"></i></a>
                                    </div>
                                </div>
                                <div>
                                    <p class="text-sm text-gray-600 mb-3 font-medium">Sidebar "हामीलाई फलो गर्नुहोस्" Section:</p>
                                    <div class="space-y-2">
                                        <div class="flex items-center gap-2 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm">
                                            <i class="fab fa-facebook-f"></i> Facebook
                                        </div>
                                        <div class="flex items-center gap-2 bg-red-600 text-white py-2 px-3 rounded-lg text-sm">
                                            <i class="fab fa-youtube"></i> YouTube
                                        </div>
                                        <div class="flex items-center gap-2 bg-sky-500 text-white py-2 px-3 rounded-lg text-sm">
                                            <i class="fab fa-twitter"></i> Twitter
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advertisements Tab -->
                    <div id="dash-ads" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold">Manage Advertisements</h3>
                                <button onclick="openAdForm()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2">
                                    <i class="fas fa-plus"></i> Add Advertisement
                                </button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="adsList"></div>
                        </div>

                        <!-- Ad Placement Guide -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mt-6">
                            <h3 class="text-lg font-bold mb-4">Ad Placement Guide</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm font-medium">Sidebar</span>
                                    </div>
                                    <p class="text-sm text-gray-600">300x250 pixels - Appears in right sidebar</p>
                                </div>
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium">Header</span>
                                    </div>
                                    <p class="text-sm text-gray-600">728x90 pixels - Top banner below navigation</p>
                                </div>
                                <div class="border rounded-lg p-4">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-sm font-medium">Footer</span>
                                    </div>
                                    <p class="text-sm text-gray-600">728x90 pixels - Above footer section</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Users Tab -->
                    <div id="dash-users" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold">Team Members</h3>
                                <button onclick="openUserForm()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2">
                                    <i class="fas fa-user-plus"></i> Add Team Member
                                </button>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead>
                                        <tr class="bg-gray-50 text-left">
                                            <th class="px-4 py-3 font-semibold text-gray-600">User</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Username</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Role</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Status</th>
                                            <th class="px-4 py-3 font-semibold text-gray-600">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody" class="divide-y"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Info Tab -->
                    <div id="dash-contact" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-green-500 to-green-700 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-address-book text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-gray-800">Contact Information</h3>
                                    <p class="text-gray-500">Manage your news portal's contact details shown in footer</p>
                                </div>
                            </div>
                            
                            <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6">
                                <div class="flex items-start gap-3">
                                    <i class="fas fa-info-circle text-blue-500 mt-1 text-xl"></i>
                                    <div>
                                        <p class="text-blue-800 font-medium">Where this information appears:</p>
                                        <p class="text-blue-700 text-sm">This contact information will be displayed in the website footer under "सम्पर्क" (Contact) section for all visitors to see.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <form onsubmit="saveContactInfo(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- Address -->
                                    <div class="md:col-span-2">
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-map-marker-alt text-red-500 mr-2"></i>Address (ठेगाना)
                                        </label>
                                        <input type="text" id="contactAddress" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="जनकपुरधाम, मधेश प्रदेश">
                                        <p class="text-xs text-gray-500 mt-1">Enter the office address of your news portal</p>
                                    </div>
                                    
                                    <!-- Phone -->
                                    <div>
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-phone text-green-500 mr-2"></i>Phone Number (फोन नम्बर)
                                        </label>
                                        <input type="text" id="contactPhone" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="+977-41-520XXX">
                                        <p class="text-xs text-gray-500 mt-1">Main contact phone number</p>
                                    </div>
                                    
                                    <!-- Email -->
                                    <div>
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-envelope text-blue-500 mr-2"></i>Email (इमेल)
                                        </label>
                                        <input type="email" id="contactEmail" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="info@hamromithila.com">
                                        <p class="text-xs text-gray-500 mt-1">Contact email address</p>
                                    </div>
                                    
                                    <!-- Secondary Phone -->
                                    <div>
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-mobile-alt text-purple-500 mr-2"></i>Mobile Number (मोबाइल)
                                        </label>
                                        <input type="text" id="contactMobile" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="+977-98XXXXXXXX">
                                        <p class="text-xs text-gray-500 mt-1">Secondary/mobile contact number (optional)</p>
                                    </div>
                                    
                                    <!-- Fax -->
                                    <div>
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-fax text-gray-500 mr-2"></i>Fax Number (फ्याक्स)
                                        </label>
                                        <input type="text" id="contactFax" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="+977-41-520XXX">
                                        <p class="text-xs text-gray-500 mt-1">Fax number (optional)</p>
                                    </div>
                                    
                                    <!-- PO Box -->
                                    <div>
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-mailbox text-orange-500 mr-2"></i>P.O. Box (पो.ब.)
                                        </label>
                                        <input type="text" id="contactPOBox" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="P.O. Box XXX">
                                        <p class="text-xs text-gray-500 mt-1">Post office box number (optional)</p>
                                    </div>
                                    
                                    <!-- Office Hours -->
                                    <div>
                                        <label class="block text-gray-700 font-bold mb-2">
                                            <i class="fas fa-clock text-yellow-500 mr-2"></i>Office Hours (कार्यालय समय)
                                        </label>
                                        <input type="text" id="contactHours" class="w-full border-2 rounded-lg px-4 py-3 text-lg focus:outline-none focus:border-green-500" placeholder="Sun-Fri: 10:00 AM - 6:00 PM">
                                        <p class="text-xs text-gray-500 mt-1">Office working hours (optional)</p>
                                    </div>
                                </div>
                                
                                <!-- Live Preview -->
                                <div class="mt-8 bg-gray-800 text-white rounded-xl p-6">
                                    <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
                                        <i class="fas fa-eye text-green-400"></i> Live Footer Preview
                                    </h4>
                                    <div class="bg-gray-700 rounded-lg p-4">
                                        <h5 class="font-bold text-lg mb-3">सम्पर्क</h5>
                                        <ul class="space-y-2 text-gray-300 text-sm" id="contactPreview">
                                            <li><i class="fas fa-map-marker-alt mr-2"></i><span id="previewAddress">जनकपुरधाम, मधेश प्रदेश</span></li>
                                            <li><i class="fas fa-phone mr-2"></i><span id="previewPhone">+977-41-520XXX</span></li>
                                            <li><i class="fas fa-envelope mr-2"></i><span id="previewEmail">info@hamromithila.com</span></li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <!-- Save Button -->
                                <div class="mt-6 flex flex-wrap items-center gap-4">
                                    <button type="submit" class="bg-gradient-to-r from-green-600 to-green-700 text-white px-10 py-4 rounded-xl hover:from-green-700 hover:to-green-800 flex items-center gap-3 font-bold text-lg shadow-xl transition-all hover:shadow-2xl">
                                        <i class="fas fa-save text-xl"></i> Save Contact Information
                                    </button>
                                    <p class="text-gray-500"><i class="fas fa-check-circle text-green-500 mr-1"></i> Changes will appear in website footer immediately</p>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Footer Settings Tab -->
                    <div id="dash-footer" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center gap-4 mb-6">
                                <div class="w-16 h-16 bg-gradient-to-br from-gray-700 to-gray-900 rounded-2xl flex items-center justify-center shadow-lg">
                                    <i class="fas fa-shoe-prints text-white text-2xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-2xl font-bold text-gray-800">Footer Settings</h3>
                                    <p class="text-gray-500">Manage footer content, links, and copyright text</p>
                                </div>
                            </div>
                            
                            <form onsubmit="saveFooterSettings(event)">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- Copyright Section -->
                                    <div class="bg-gray-50 rounded-xl p-6 border">
                                        <h4 class="font-bold text-gray-800 mb-4 text-lg flex items-center gap-2">
                                            <i class="fas fa-copyright text-gray-600"></i> Copyright Text
                                        </h4>
                                        <div class="mb-4">
                                            <label class="block text-gray-700 font-medium mb-2">Copyright Year</label>
                                            <input type="text" id="footerCopyrightYear" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="2024">
                                        </div>
                                        <div class="mb-4">
                                            <label class="block text-gray-700 font-medium mb-2">Copyright Text (Nepali)</label>
                                            <input type="text" id="footerCopyrightText" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="सर्वाधिकार सुरक्षित।">
                                        </div>
                                        <div class="mb-4">
                                            <label class="block text-gray-700 font-medium mb-2">News Portal Name</label>
                                            <input type="text" id="footerPortalName" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="Hamro Mithila">
                                        </div>
                                    </div>
                                    
                                    <!-- About Section -->
                                    <div class="bg-gray-50 rounded-xl p-6 border">
                                        <h4 class="font-bold text-gray-800 mb-4 text-lg flex items-center gap-2">
                                            <i class="fas fa-info-circle text-blue-500"></i> About Section
                                        </h4>
                                        <div class="mb-4">
                                            <label class="block text-gray-700 font-medium mb-2">About Description (Nepali)</label>
                                            <textarea id="footerAboutText" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।"></textarea>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Quick Links Section -->
                                <div class="bg-gray-50 rounded-xl p-6 border mt-6">
                                    <h4 class="font-bold text-gray-800 mb-4 text-lg flex items-center gap-2">
                                        <i class="fas fa-link text-green-500"></i> द्रुत लिंकहरू (Quick Links)
                                    </h4>
                                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
                                        <p class="text-sm text-blue-800"><i class="fas fa-info-circle mr-2"></i><strong>How to edit:</strong> Change or add text labels below. These will appear in the footer as quick links.</p>
                                    </div>
                                    
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <!-- हाम्रो बारेमा -->
                                        <div class="bg-white p-5 rounded-xl border-2 border-blue-200 hover:shadow-lg transition">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center">
                                                    <i class="fas fa-users text-white"></i>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-800 font-bold text-lg">हाम्रो बारेमा</label>
                                                    <p class="text-xs text-gray-500">About Us - Write about your news portal</p>
                                                </div>
                                            </div>
                                            <input type="text" id="footerLink1" class="w-full border-2 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:border-blue-500 font-bold text-lg" placeholder="हाम्रो बारेमा" value="हाम्रो बारेमा">
                                            <textarea id="footerLink1Content" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500" placeholder="हाम्रो समाचार पोर्टलको बारेमा यहाँ लेख्नुहोस्..."></textarea>
                                        </div>
                                        
                                        <!-- सम्पर्क -->
                                        <div class="bg-white p-5 rounded-xl border-2 border-green-200 hover:shadow-lg transition">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center">
                                                    <i class="fas fa-envelope text-white"></i>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-800 font-bold text-lg">सम्पर्क</label>
                                                    <p class="text-xs text-gray-500">Contact - Write contact information</p>
                                                </div>
                                            </div>
                                            <input type="text" id="footerLink2" class="w-full border-2 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:border-green-500 font-bold text-lg" placeholder="सम्पर्क" value="सम्पर्क">
                                            <textarea id="footerLink2Content" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-green-500" placeholder="सम्पर्क जानकारी यहाँ लेख्नुहोस्..."></textarea>
                                        </div>
                                        
                                        <!-- विज्ञापन -->
                                        <div class="bg-white p-5 rounded-xl border-2 border-purple-200 hover:shadow-lg transition">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center">
                                                    <i class="fas fa-ad text-white"></i>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-800 font-bold text-lg">विज्ञापन</label>
                                                    <p class="text-xs text-gray-500">Advertising - Write advertising info</p>
                                                </div>
                                            </div>
                                            <input type="text" id="footerLink3" class="w-full border-2 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:border-purple-500 font-bold text-lg" placeholder="विज्ञापन" value="विज्ञापन">
                                            <textarea id="footerLink3Content" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500" placeholder="विज्ञापन सम्बन्धी जानकारी यहाँ लेख्नुहोस्..."></textarea>
                                        </div>
                                        
                                        <!-- गोपनीयता नीति -->
                                        <div class="bg-white p-5 rounded-xl border-2 border-red-200 hover:shadow-lg transition">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center">
                                                    <i class="fas fa-shield-alt text-white"></i>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-800 font-bold text-lg">गोपनीयता नीति</label>
                                                    <p class="text-xs text-gray-500">Privacy Policy - Write privacy policy</p>
                                                </div>
                                            </div>
                                            <input type="text" id="footerLink4" class="w-full border-2 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:border-red-500 font-bold text-lg" placeholder="गोपनीयता नीति" value="गोपनीयता नीति">
                                            <textarea id="footerLink4Content" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="गोपनीयता नीति यहाँ लेख्नुहोस्..."></textarea>
                                        </div>
                                        
                                        <!-- सेवाका सर्तहरू -->
                                        <div class="bg-white p-5 rounded-xl border-2 border-orange-200 hover:shadow-lg transition">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center">
                                                    <i class="fas fa-file-contract text-white"></i>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-800 font-bold text-lg">सेवाका सर्तहरू</label>
                                                    <p class="text-xs text-gray-500">Terms of Service - Write terms</p>
                                                </div>
                                            </div>
                                            <input type="text" id="footerLink5" class="w-full border-2 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:border-orange-500 font-bold text-lg" placeholder="सेवाका सर्तहरू" value="सेवाका सर्तहरू">
                                            <textarea id="footerLink5Content" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-orange-500" placeholder="सेवाका सर्तहरू यहाँ लेख्नुहोस्..."></textarea>
                                        </div>
                                        
                                        <!-- क्यारियर -->
                                        <div class="bg-white p-5 rounded-xl border-2 border-teal-200 hover:shadow-lg transition">
                                            <div class="flex items-center gap-3 mb-3">
                                                <div class="w-10 h-10 bg-teal-500 rounded-lg flex items-center justify-center">
                                                    <i class="fas fa-briefcase text-white"></i>
                                                </div>
                                                <div>
                                                    <label class="block text-gray-800 font-bold text-lg">क्यारियर</label>
                                                    <p class="text-xs text-gray-500">Careers - Write job opportunities</p>
                                                </div>
                                            </div>
                                            <input type="text" id="footerLink6" class="w-full border-2 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:border-teal-500 font-bold text-lg" placeholder="क्यारियर" value="क्यारियर">
                                            <textarea id="footerLink6Content" rows="4" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-teal-500" placeholder="रोजगारी र क्यारियर अवसर यहाँ लेख्नुहोस्..."></textarea>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Live Footer Preview -->
                                <div class="mt-6 bg-gray-800 text-white rounded-xl p-6">
                                    <h4 class="text-lg font-bold mb-4 flex items-center gap-2">
                                        <i class="fas fa-eye text-green-400"></i> Live Footer Preview
                                    </h4>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div>
                                            <h5 class="font-bold mb-2" id="previewPortalName">Hamro Mithila</h5>
                                            <p class="text-gray-400 text-sm" id="previewAboutText">मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।</p>
                                        </div>
                                        <div>
                                            <h5 class="font-bold mb-2">द्रुत लिंकहरू</h5>
                                            <ul class="text-gray-400 text-sm space-y-1" id="previewQuickLinks">
                                                <li>हाम्रो बारेमा</li>
                                                <li>सम्पर्क</li>
                                                <li>विज्ञापन</li>
                                                <li>गोपनीयता नीति</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-bold mb-2">सम्पर्क</h5>
                                            <ul class="text-gray-400 text-sm space-y-1">
                                                <li><i class="fas fa-map-marker-alt mr-2"></i>जनकपुरधाम</li>
                                                <li><i class="fas fa-phone mr-2"></i>+977-XXX</li>
                                                <li><i class="fas fa-envelope mr-2"></i>info@...</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="border-t border-gray-700 mt-4 pt-4 text-center text-gray-400 text-sm">
                                        <p id="previewCopyright">© 2024 Hamro Mithila. सर्वाधिकार सुरक्षित।</p>
                                    </div>
                                </div>
                                
                                <!-- Save Button -->
                                <div class="mt-6 flex flex-wrap items-center gap-4">
                                    <button type="submit" class="bg-gradient-to-r from-gray-700 to-gray-900 text-white px-10 py-4 rounded-xl hover:from-gray-800 hover:to-black flex items-center gap-3 font-bold text-lg shadow-xl transition-all hover:shadow-2xl">
                                        <i class="fas fa-save text-xl"></i> Save Footer Settings
                                    </button>
                                    <p class="text-gray-500"><i class="fas fa-check-circle text-green-500 mr-1"></i> Changes will appear in website footer immediately</p>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Activity Log Tab -->
                    <div id="dash-activity" class="dashboard-tab hidden">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-lg font-bold">Activity Log</h3>
                                <button onclick="clearActivityLog()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 text-sm admin-only-btn">
                                    <i class="fas fa-trash mr-2"></i>Clear Log
                                </button>
                            </div>
                            <div class="space-y-3" id="activityLogFull"></div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div id="dash-settings" class="dashboard-tab hidden">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h3 class="text-lg font-bold mb-4">My Profile</h3>
                                <form onsubmit="updateProfile(event)">
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Full Name</label>
                                        <input type="text" id="profileName" class="w-full border rounded-lg px-4 py-2" required>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                                        <input type="email" id="profileEmail" class="w-full border rounded-lg px-4 py-2" required>
                                    </div>
                                    <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700">Update Profile</button>
                                </form>
                            </div>
                            <div class="bg-white rounded-xl shadow-lg p-6">
                                <h3 class="text-lg font-bold mb-4">Change Password</h3>
                                <form onsubmit="changePassword(event)">
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Current Password</label>
                                        <input type="password" id="currentPassword" class="w-full border rounded-lg px-4 py-2" required>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">New Password</label>
                                        <input type="password" id="newPassword" class="w-full border rounded-lg px-4 py-2" required>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Confirm Password</label>
                                        <input type="password" id="confirmPassword" class="w-full border rounded-lg px-4 py-2" required>
                                    </div>
                                    <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700">Change Password</button>
                                </form>
                            </div>
                        </div>
                        
                        <!-- Social Media Links - Admin Only -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mt-6 admin-only">
                            <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-share-alt text-red-500"></i> News Portal Social Media Links
                            </h3>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                                <p class="text-sm text-blue-800"><i class="fas fa-info-circle mr-2"></i><strong>Note:</strong> Add your news portal's official social media page links here. Website visitors can click on these icons in the header and sidebar to visit your official pages.</p>
                            </div>
                            <form onsubmit="saveSocialLinks(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">
                                            <i class="fab fa-facebook text-blue-600 mr-2"></i>Facebook Page URL
                                        </label>
                                        <input type="url" id="socialFacebook" class="w-full border rounded-lg px-4 py-2" placeholder="https://facebook.com/HamroMithilaNews">
                                        <p class="text-xs text-gray-500 mt-1">Your news portal's official Facebook page</p>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">
                                            <i class="fab fa-twitter text-sky-500 mr-2"></i>Twitter/X Page URL
                                        </label>
                                        <input type="url" id="socialTwitter" class="w-full border rounded-lg px-4 py-2" placeholder="https://twitter.com/HamroMithila">
                                        <p class="text-xs text-gray-500 mt-1">Your news portal's official Twitter/X handle</p>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">
                                            <i class="fab fa-youtube text-red-600 mr-2"></i>YouTube Channel URL
                                        </label>
                                        <input type="url" id="socialYoutube" class="w-full border rounded-lg px-4 py-2" placeholder="https://youtube.com/@HamroMithilaNews">
                                        <p class="text-xs text-gray-500 mt-1">Your news portal's official YouTube channel</p>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">
                                            <i class="fab fa-instagram text-pink-600 mr-2"></i>Instagram Page URL
                                        </label>
                                        <input type="url" id="socialInstagram" class="w-full border rounded-lg px-4 py-2" placeholder="https://instagram.com/HamroMithila">
                                        <p class="text-xs text-gray-500 mt-1">Your news portal's official Instagram page</p>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">
                                            <i class="fab fa-tiktok text-black mr-2"></i>TikTok Page URL
                                        </label>
                                        <input type="url" id="socialTiktok" class="w-full border rounded-lg px-4 py-2" placeholder="https://tiktok.com/@HamroMithila">
                                        <p class="text-xs text-gray-500 mt-1">Your news portal's official TikTok page</p>
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">
                                            <i class="fab fa-linkedin text-blue-700 mr-2"></i>LinkedIn Page URL
                                        </label>
                                        <input type="url" id="socialLinkedin" class="w-full border rounded-lg px-4 py-2" placeholder="https://linkedin.com/company/HamroMithila">
                                        <p class="text-xs text-gray-500 mt-1">Your news portal's official LinkedIn page</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4">
                                    <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2">
                                        <i class="fas fa-save"></i> Save Social Links
                                    </button>
                                    <span class="text-sm text-gray-500"><i class="fas fa-eye mr-1"></i> Links will appear in header & sidebar for visitors</span>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Logo & Branding - Admin Only -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mt-6 admin-only">
                            <div class="flex items-center gap-3 mb-6">
                                <div class="w-12 h-12 bg-gradient-to-br from-red-500 to-red-700 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-palette text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-bold text-gray-800">Logo & Branding</h3>
                                    <p class="text-sm text-gray-500">Customize your news portal's logo and title</p>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6">
                                <div class="flex items-start gap-3">
                                    <i class="fas fa-lightbulb text-yellow-500 mt-1 text-xl"></i>
                                    <div>
                                        <p class="text-sm text-blue-800 font-medium">How it works:</p>
                                        <ul class="text-sm text-blue-700 mt-1 space-y-1">
                                            <li>• <strong>Upload logo</strong> from your device (up to 150MB) OR paste a URL</li>
                                            <li>• <strong>Change the newspaper title</strong>, logo text, and tagline</li>
                                            <li>• Changes appear <strong>immediately</strong> on header and footer</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <form onsubmit="saveLogoAndBranding(event)">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <!-- Logo Upload Section -->
                                    <div class="bg-gray-50 rounded-xl p-6 border">
                                        <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                            <i class="fas fa-image text-red-500"></i> Upload Logo
                                        </h4>
                                        
                                        <div class="space-y-4">
                                            <!-- Upload from Device -->
                                            <div>
                                                <label class="block text-gray-700 text-sm font-medium mb-2">
                                                    Option 1: Upload from Device
                                                </label>
                                                <label class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center cursor-pointer hover:border-red-500 hover:bg-red-50 transition-all block group">
                                                    <input type="file" id="logoUpload" accept="image/*" class="hidden" onchange="handleLogoUpload(this)">
                                                    <div class="w-16 h-16 bg-red-100 rounded-full mx-auto flex items-center justify-center mb-3 group-hover:bg-red-200 transition">
                                                        <i class="fas fa-cloud-upload-alt text-3xl text-red-500"></i>
                                                    </div>
                                                    <p class="text-sm font-medium text-gray-700">Click to upload logo image</p>
                                                    <p class="text-xs text-gray-400 mt-1">JPG, PNG, GIF, WebP, SVG • Max 150MB</p>
                                                </label>
                                            </div>
                                            
                                            <!-- Divider -->
                                            <div class="flex items-center gap-3">
                                                <div class="flex-1 h-px bg-gray-300"></div>
                                                <span class="text-sm text-gray-500 font-medium">OR</span>
                                                <div class="flex-1 h-px bg-gray-300"></div>
                                            </div>
                                            
                                            <!-- URL Input -->
                                            <div>
                                                <label class="block text-gray-700 text-sm font-medium mb-2">
                                                    Option 2: Paste Image URL
                                                </label>
                                                <div class="flex gap-2">
                                                    <input type="url" id="logoUrl" class="flex-1 border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="https://example.com/your-logo.png" onchange="previewLogoUrl(this.value)">
                                                    <button type="button" onclick="previewLogoUrl(document.getElementById('logoUrl').value)" class="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg transition">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            <!-- Logo Preview -->
                                            <div class="bg-white rounded-xl p-4 border-2 border-gray-200">
                                                <p class="text-sm text-gray-600 mb-3 font-medium text-center">Current Logo Preview</p>
                                                <div class="flex items-center justify-center">
                                                    <div class="relative w-24 h-24">
                                                        <div class="absolute inset-0 rounded-xl overflow-hidden border-3 border-red-500 shadow-lg">
                                                            <img id="logoPreviewImg" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" alt="Logo Preview" class="w-full h-full object-cover">
                                                            <div class="absolute inset-0 bg-gradient-to-t from-red-700/60 to-red-500/30" id="logoOverlay"></div>
                                                        </div>
                                                        <div class="absolute inset-0 flex items-center justify-center">
                                                            <span id="logoPreviewText" class="text-white font-bold text-xl drop-shadow-lg" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">हमि</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="flex justify-center gap-3 mt-4">
                                                    <button type="button" onclick="resetLogo()" class="text-red-500 text-sm hover:underline flex items-center gap-1">
                                                        <i class="fas fa-undo"></i> Reset to Default
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Title & Branding Section -->
                                    <div class="bg-gray-50 rounded-xl p-6 border">
                                        <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                            <i class="fas fa-heading text-red-500"></i> Newspaper Title & Text
                                        </h4>
                                        
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-gray-700 text-sm font-medium mb-2">
                                                    <i class="fas fa-newspaper text-gray-400 mr-1"></i> Newspaper Title (English)
                                                </label>
                                                <input type="text" id="newspaperTitle" class="w-full border-2 rounded-lg px-4 py-3 text-xl font-bold focus:outline-none focus:border-red-500" placeholder="Hamro Mithila" oninput="updateLivePreview()">
                                            </div>
                                            
                                            <div>
                                                <label class="block text-gray-700 text-sm font-medium mb-2">
                                                    <i class="fas fa-font text-gray-400 mr-1"></i> Logo Text (Short/Nepali)
                                                </label>
                                                <input type="text" id="logoText" class="w-full border-2 rounded-lg px-4 py-3 text-xl font-bold focus:outline-none focus:border-red-500" placeholder="हमि" oninput="updateLivePreview()">
                                                <p class="text-xs text-gray-500 mt-1">This text appears on the logo image</p>
                                            </div>
                                            
                                            <div>
                                                <label class="block text-gray-700 text-sm font-medium mb-2">
                                                    <i class="fas fa-quote-left text-gray-400 mr-1"></i> Tagline (Nepali)
                                                </label>
                                                <input type="text" id="newspaperTagline" class="w-full border-2 rounded-lg px-4 py-3 focus:outline-none focus:border-red-500" placeholder="मिथिलाको विश्वसनीय समाचार" oninput="updateLivePreview()">
                                            </div>
                                            
                                            <div class="flex items-center gap-3 p-3 bg-white rounded-lg border">
                                                <input type="checkbox" id="showLogoOverlay" class="w-5 h-5 text-red-600 rounded cursor-pointer" checked onchange="updateLivePreview()">
                                                <label for="showLogoOverlay" class="font-medium cursor-pointer flex-1">Show red overlay on logo</label>
                                            </div>
                                            
                                            <!-- Live Preview -->
                                            <div class="bg-white rounded-xl p-4 border-2 border-gray-200">
                                                <p class="text-sm text-gray-600 mb-3 font-medium text-center">
                                                    <i class="fas fa-eye text-green-500 mr-1"></i> Live Header Preview
                                                </p>
                                                <div class="bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg p-4 flex items-center gap-4">
                                                    <div class="relative w-14 h-14 flex-shrink-0">
                                                        <div class="absolute inset-0 rounded-lg overflow-hidden border-2 border-red-600 shadow">
                                                            <img id="headerPreviewLogo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" class="w-full h-full object-cover">
                                                            <div class="absolute inset-0 bg-gradient-to-t from-red-700/80 to-red-600/40" id="headerPreviewOverlay"></div>
                                                        </div>
                                                        <div class="absolute inset-0 flex items-center justify-center">
                                                            <span id="headerPreviewLogoText" class="text-white font-bold text-sm drop-shadow-lg" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">हमि</span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <h1 id="headerPreviewTitle" class="text-xl font-bold text-red-700">Hamro Mithila</h1>
                                                        <p id="headerPreviewTagline" class="text-xs text-gray-500">मिथिलाको विश्वसनीय समाचार</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-8 flex flex-wrap items-center gap-4 p-4 bg-green-50 rounded-xl border border-green-200">
                                    <button type="submit" class="bg-gradient-to-r from-red-600 to-red-700 text-white px-8 py-3 rounded-lg hover:from-red-700 hover:to-red-800 flex items-center gap-2 font-bold shadow-lg transition-all hover:shadow-xl">
                                        <i class="fas fa-save"></i> Save Logo & Branding
                                    </button>
                                    <p class="text-sm text-green-700">
                                        <i class="fas fa-check-circle mr-1"></i> Changes will apply to header and footer immediately
                                    </p>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Site Settings - Admin Only -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mt-6 admin-only">
                            <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                                <i class="fas fa-globe text-red-500"></i> Site Settings
                            </h3>
                            <form onsubmit="saveSiteSettings(event)">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Site Name</label>
                                        <input type="text" id="siteName" class="w-full border rounded-lg px-4 py-2" placeholder="Hamro Mithila">
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Tagline</label>
                                        <input type="text" id="siteTagline" class="w-full border rounded-lg px-4 py-2" placeholder="मिथिलाको विश्वसनीय समाचार">
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Contact Phone</label>
                                        <input type="text" id="sitePhone" class="w-full border rounded-lg px-4 py-2" placeholder="+977-41-520XXX">
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Contact Email</label>
                                        <input type="email" id="siteEmail" class="w-full border rounded-lg px-4 py-2" placeholder="info@hamromithila.com">
                                    </div>
                                    <div class="mb-4 md:col-span-2">
                                        <label class="block text-gray-700 text-sm font-bold mb-2">Address</label>
                                        <input type="text" id="siteAddress" class="w-full border rounded-lg px-4 py-2" placeholder="जनकपुरधाम, मधेश प्रदेश">
                                    </div>
                                </div>
                                <button type="submit" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2">
                                    <i class="fas fa-save"></i> Save Site Settings
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- News Form Modal -->
    <div id="newsFormModal" class="modal fixed inset-0 bg-black/50 z-[60] hidden overflow-y-auto">
        <div class="modal-content bg-white my-8 mx-4 md:mx-auto md:max-w-3xl rounded-xl shadow-xl">
            <div class="bg-gradient-to-r from-red-700 to-red-600 text-white p-4 rounded-t-xl flex justify-between items-center">
                <h2 class="text-lg font-bold" id="newsFormTitle"><i class="fas fa-newspaper mr-2"></i>Add New Article</h2>
                <button onclick="closeNewsForm()" class="hover:bg-white/20 p-2 rounded-lg"><i class="fas fa-times"></i></button>
            </div>
            <form id="newsForm" class="p-6" onsubmit="saveNews(event)">
                <input type="hidden" id="newsId">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Title (शीर्षक) *</label>
                        <input type="text" id="newsTitle" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Category *</label>
                        <select id="newsCategory" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" required></select>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Image *</label>
                        <div class="space-y-2">
                            <div class="flex gap-2">
                                <label class="flex-1 border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-red-500 hover:bg-red-50 transition" id="newsImageUploadLabel">
                                    <input type="file" id="newsImageUpload" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'newsImage', 'newsImagePreview')">
                                    <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                    <p class="text-sm text-gray-600">Click to upload image</p>
                                    <p class="text-xs text-gray-400">Supports: JPG, PNG, GIF, WebP (up to 150MB)</p>
                                </label>
                            </div>
                            <div class="flex items-center gap-2">
                                <div class="flex-1 h-px bg-gray-300"></div>
                                <span class="text-xs text-gray-500">OR paste URL</span>
                                <div class="flex-1 h-px bg-gray-300"></div>
                            </div>
                            <input type="url" id="newsImage" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="https://example.com/image.jpg" onchange="previewImageUrl(this.value, 'newsImagePreview')">
                            <div id="newsImagePreview" class="hidden mt-2 p-2 bg-gray-50 rounded-lg border">
                                <img src="" class="max-h-40 mx-auto rounded" id="newsImagePreviewImg">
                                <button type="button" onclick="clearImagePreview('newsImage', 'newsImageUpload', 'newsImagePreview')" class="mt-2 text-red-500 text-sm hover:underline w-full text-center"><i class="fas fa-times mr-1"></i>Remove Image</button>
                            </div>
                        </div>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Summary (सारांश)</label>
                        <textarea id="newsSummary" rows="2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500"></textarea>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 text-sm font-bold mb-2">Content (सामग्री) *</label>
                        <textarea id="newsContent" rows="6" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" required></textarea>
                    </div>
                    <div class="md:col-span-2 flex flex-wrap items-center gap-6">
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="newsFeatured" class="w-5 h-5 text-red-600 rounded">
                            <span class="font-medium">Featured Article</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="newsTrending" class="w-5 h-5 text-red-600 rounded">
                            <span class="font-medium">Trending</span>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="newsPublished" class="w-5 h-5 text-red-600 rounded" checked>
                            <span class="font-medium">Published</span>
                        </label>
                    </div>
                </div>
                <div class="flex gap-3 justify-end border-t pt-4">
                    <button type="button" onclick="closeNewsForm()" class="px-6 py-2 border-2 rounded-lg hover:bg-gray-100">Cancel</button>
                    <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2">
                        <i class="fas fa-save"></i> Save Article
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Breaking News Form Modal -->
    <div id="breakingFormModal" class="modal fixed inset-0 bg-black/50 z-[60] hidden overflow-y-auto">
        <div class="modal-content bg-white my-8 mx-4 md:mx-auto md:max-w-3xl rounded-xl shadow-xl">
            <div class="bg-gradient-to-r from-red-700 to-red-600 text-white p-4 rounded-t-xl flex justify-between items-center">
                <h2 class="text-lg font-bold"><i class="fas fa-bolt mr-2"></i>Add Breaking News</h2>
                <button onclick="closeBreakingForm()" class="hover:bg-white/20 p-2 rounded-lg"><i class="fas fa-times"></i></button>
            </div>
            <form id="breakingForm" class="p-6" onsubmit="saveBreakingNews(event)">
                <input type="hidden" id="breakingId">
                
                <!-- Breaking News Headline -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">
                        <i class="fas fa-bolt text-yellow-500 mr-1"></i> Breaking News Headline *
                    </label>
                    <input type="text" id="breakingText" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="Enter breaking news headline that appears in ticker" required>
                </div>
                
                <!-- News Type Selection -->
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">News Type *</label>
                    <div class="flex gap-4">
                        <label class="flex items-center gap-2 cursor-pointer p-3 border-2 rounded-lg hover:bg-gray-50 flex-1" onclick="toggleBreakingNewsType('existing')">
                            <input type="radio" name="breakingType" id="breakingTypeExisting" value="existing" checked class="w-4 h-4">
                            <div>
                                <span class="font-medium">Link to Existing Article</span>
                                <p class="text-xs text-gray-500">Connect to an already published news</p>
                            </div>
                        </label>
                        <label class="flex items-center gap-2 cursor-pointer p-3 border-2 rounded-lg hover:bg-gray-50 flex-1" onclick="toggleBreakingNewsType('new')">
                            <input type="radio" name="breakingType" id="breakingTypeNew" value="new" class="w-4 h-4">
                            <div>
                                <span class="font-medium">Create New Article</span>
                                <p class="text-xs text-gray-500">Write full news with photo & content</p>
                            </div>
                        </label>
                    </div>
                </div>
                
                <!-- Existing Article Selection -->
                <div id="existingArticleSection" class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Select Article to Link</label>
                    <select id="breakingArticle" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500">
                        <option value="">-- Select an Article --</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-1">Users will be able to click and read the full story.</p>
                </div>
                
                <!-- New Article Form -->
                <div id="newArticleSection" class="hidden">
                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4">
                        <p class="text-sm text-yellow-800"><i class="fas fa-info-circle mr-1"></i> This will create a new featured article linked to the breaking news.</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="md:col-span-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-heading text-gray-500 mr-1"></i> Article Title *
                            </label>
                            <input type="text" id="breakingNewsTitle" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="Full article title">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-folder text-gray-500 mr-1"></i> Category *
                            </label>
                            <select id="breakingNewsCategory" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500"></select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-image text-gray-500 mr-1"></i> Image *
                            </label>
                            <div class="space-y-2">
                                <label class="flex-1 border-2 border-dashed border-gray-300 rounded-lg p-3 text-center cursor-pointer hover:border-red-500 hover:bg-red-50 transition block">
                                    <input type="file" id="breakingNewsImageUpload" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'breakingNewsImage', 'breakingNewsImagePreviewContainer')">
                                    <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-1"></i>
                                    <p class="text-xs text-gray-600">Click to upload (up to 150MB)</p>
                                </label>
                                <div class="flex items-center gap-2">
                                    <div class="flex-1 h-px bg-gray-300"></div>
                                    <span class="text-xs text-gray-500">OR URL</span>
                                    <div class="flex-1 h-px bg-gray-300"></div>
                                </div>
                                <input type="url" id="breakingNewsImage" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500 text-sm" placeholder="https://example.com/image.jpg" onchange="previewImageUrl(this.value, 'breakingNewsImagePreviewContainer')">
                                <div id="breakingNewsImagePreviewContainer" class="hidden mt-2 p-2 bg-gray-50 rounded-lg border">
                                    <img src="" class="max-h-32 mx-auto rounded" id="breakingNewsImagePreviewContainerImg">
                                    <button type="button" onclick="clearImagePreview('breakingNewsImage', 'breakingNewsImageUpload', 'breakingNewsImagePreviewContainer')" class="mt-2 text-red-500 text-xs hover:underline w-full text-center"><i class="fas fa-times mr-1"></i>Remove</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-align-left text-gray-500 mr-1"></i> Summary (Short Description)
                            </label>
                            <textarea id="breakingNewsSummary" rows="2" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="Brief summary of the news..."></textarea>
                        </div>
                        
                        <div class="md:col-span-2">
                            <label class="block text-gray-700 text-sm font-bold mb-2">
                                <i class="fas fa-newspaper text-gray-500 mr-1"></i> Full Content *
                            </label>
                            <textarea id="breakingNewsContent" rows="6" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="Write the full news article content here..."></textarea>
                        </div>
                        
                        <!-- Image Preview -->
                        <div class="md:col-span-2" id="breakingImagePreview" style="display:none;">
                            <label class="block text-gray-700 text-sm font-bold mb-2">Image Preview</label>
                            <div class="border rounded-lg p-2 bg-gray-50">
                                <img id="breakingImagePreviewImg" src="" class="max-w-full h-48 object-cover rounded mx-auto">
                            </div>
                        </div>
                        
                        <div class="md:col-span-2 flex flex-wrap items-center gap-6">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="breakingNewsFeatured" class="w-5 h-5 text-red-600 rounded" checked>
                                <span class="font-medium">Featured Article</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" id="breakingNewsTrending" class="w-5 h-5 text-red-600 rounded" checked>
                                <span class="font-medium">Trending</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3 justify-end border-t pt-4 mt-4">
                    <button type="button" onclick="closeBreakingForm()" class="px-6 py-2 border-2 rounded-lg hover:bg-gray-100">Cancel</button>
                    <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2">
                        <i class="fas fa-bolt"></i> Publish Breaking News
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Advertisement Form Modal -->
    <div id="adFormModal" class="modal fixed inset-0 bg-black/50 z-[60] hidden flex items-center justify-center">
        <div class="modal-content bg-white rounded-xl shadow-xl w-full max-w-lg mx-4">
            <div class="bg-gradient-to-r from-red-700 to-red-600 text-white p-4 rounded-t-xl flex justify-between items-center">
                <h2 class="text-lg font-bold" id="adFormTitle"><i class="fas fa-ad mr-2"></i>Add Advertisement</h2>
                <button onclick="closeAdForm()" class="hover:bg-white/20 p-2 rounded-lg"><i class="fas fa-times"></i></button>
            </div>
            <form id="adForm" class="p-6" onsubmit="saveAd(event)">
                <input type="hidden" id="adId">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Ad Title/Name *</label>
                    <input type="text" id="adTitle" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="e.g., Company Banner Ad" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Ad Image *</label>
                    <div class="space-y-2">
                        <label class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-red-500 hover:bg-red-50 transition block">
                            <input type="file" id="adImageUpload" accept="image/*" class="hidden" onchange="handleImageUpload(this, 'adImage', 'adImagePreviewContainer')">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                            <p class="text-sm text-gray-600">Click to upload image from device</p>
                            <p class="text-xs text-gray-400">Supports: JPG, PNG, GIF, WebP (up to 150MB)</p>
                        </label>
                        <div class="flex items-center gap-2">
                            <div class="flex-1 h-px bg-gray-300"></div>
                            <span class="text-xs text-gray-500">OR paste URL</span>
                            <div class="flex-1 h-px bg-gray-300"></div>
                        </div>
                        <input type="url" id="adImage" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="https://example.com/ad-image.jpg" onchange="previewImageUrl(this.value, 'adImagePreviewContainer')">
                        <div id="adImagePreviewContainer" class="hidden mt-2 p-2 bg-gray-50 rounded-lg border">
                            <img src="" class="max-h-40 mx-auto rounded" id="adImagePreviewContainerImg">
                            <button type="button" onclick="clearImagePreview('adImage', 'adImageUpload', 'adImagePreviewContainer')" class="mt-2 text-red-500 text-sm hover:underline w-full text-center"><i class="fas fa-times mr-1"></i>Remove Image</button>
                        </div>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Click Link URL *</label>
                    <input type="url" id="adLink" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" placeholder="https://advertiser-website.com" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Placement *</label>
                    <select id="adPlacement" class="w-full border-2 rounded-lg px-4 py-2 focus:outline-none focus:border-red-500" required>
                        <option value="sidebar">Sidebar (300x250)</option>
                        <option value="header">Header Banner (728x90)</option>
                        <option value="footer">Footer Banner (728x90)</option>
                        <option value="article">In-Article (300x250)</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" id="adActive" class="w-5 h-5 text-red-600 rounded" checked>
                        <span class="font-medium">Active (Show on website)</span>
                    </label>
                </div>
                <div id="adPreview" class="mb-4 hidden">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Preview</label>
                    <div class="border rounded-lg p-2 bg-gray-50">
                        <img id="adPreviewImg" src="" class="max-w-full h-auto rounded">
                    </div>
                </div>
                <div class="flex gap-3 justify-end border-t pt-4">
                    <button type="button" onclick="closeAdForm()" class="px-6 py-2 border-2 rounded-lg hover:bg-gray-100">Cancel</button>
                    <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Save Ad</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Form Modal -->
    <div id="userFormModal" class="modal fixed inset-0 bg-black/50 z-[60] hidden flex items-center justify-center">
        <div class="modal-content bg-white rounded-xl shadow-xl w-full max-w-md mx-4">
            <div class="bg-gradient-to-r from-red-700 to-red-600 text-white p-4 rounded-t-xl flex justify-between items-center">
                <h2 class="text-lg font-bold" id="userFormTitle"><i class="fas fa-user-plus mr-2"></i>Add Team Member</h2>
                <button onclick="closeUserForm()" class="hover:bg-white/20 p-2 rounded-lg"><i class="fas fa-times"></i></button>
            </div>
            <form id="userForm" class="p-6" onsubmit="saveUser(event)">
                <input type="hidden" id="userId">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Full Name *</label>
                    <input type="text" id="userName" class="w-full border-2 rounded-lg px-4 py-2" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Username *</label>
                    <input type="text" id="userUsername" class="w-full border-2 rounded-lg px-4 py-2" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Email *</label>
                    <input type="email" id="userEmail" class="w-full border-2 rounded-lg px-4 py-2" required>
                </div>
                <div class="mb-4" id="passwordField">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Password *</label>
                    <input type="password" id="userPassword" class="w-full border-2 rounded-lg px-4 py-2">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Role *</label>
                    <select id="userRole" class="w-full border-2 rounded-lg px-4 py-2" required>
                        <option value="author">Author</option>
                        <option value="editor">Editor</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" id="userActive" class="w-5 h-5" checked>
                        <span class="font-medium">Active Account</span>
                    </label>
                </div>
                <div class="flex gap-3 justify-end border-t pt-4">
                    <button type="button" onclick="closeUserForm()" class="px-6 py-2 border-2 rounded-lg hover:bg-gray-100">Cancel</button>
                    <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Form Modal -->
    <div id="categoryFormModal" class="modal fixed inset-0 bg-black/50 z-[60] hidden flex items-center justify-center">
        <div class="modal-content bg-white rounded-xl shadow-xl w-full max-w-md mx-4">
            <div class="bg-gradient-to-r from-red-700 to-red-600 text-white p-4 rounded-t-xl flex justify-between items-center">
                <h2 class="text-lg font-bold"><i class="fas fa-folder-plus mr-2"></i>Add Category</h2>
                <button onclick="closeCategoryForm()" class="hover:bg-white/20 p-2 rounded-lg"><i class="fas fa-times"></i></button>
            </div>
            <form id="categoryForm" class="p-6" onsubmit="saveCategory(event)">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Category Name *</label>
                    <input type="text" id="categoryName" class="w-full border-2 rounded-lg px-4 py-2" required>
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Color</label>
                    <select id="categoryColor" class="w-full border-2 rounded-lg px-4 py-2">
                        <option value="red">🔴 Red</option>
                        <option value="blue">🔵 Blue</option>
                        <option value="green">🟢 Green</option>
                        <option value="yellow">🟡 Yellow</option>
                        <option value="purple">🟣 Purple</option>
                        <option value="pink">💗 Pink</option>
                        <option value="orange">🟠 Orange</option>
                    </select>
                </div>
                <div class="flex gap-3 justify-end border-t pt-4">
                    <button type="button" onclick="closeCategoryForm()" class="px-6 py-2 border-2 rounded-lg hover:bg-gray-100">Cancel</button>
                    <button type="submit" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Save Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Article View Modal -->
    <div id="articleModal" class="modal fixed inset-0 bg-black/50 z-50 hidden overflow-y-auto">
        <div class="modal-content bg-white my-4 mx-4 md:my-8 md:mx-auto md:max-w-4xl rounded-lg shadow-xl">
            <div class="relative">
                <img id="articleImage" src="" alt="" class="w-full h-64 md:h-96 object-cover rounded-t-lg">
                <button onclick="closeArticleModal()" class="absolute top-4 right-4 bg-black/50 text-white w-10 h-10 rounded-full hover:bg-black/70">
                    <i class="fas fa-times"></i>
                </button>
                <span id="articleCategory" class="absolute bottom-4 left-4 bg-red-600 text-white px-3 py-1 rounded text-sm"></span>
            </div>
            <div class="p-6">
                <h1 id="articleTitle" class="text-2xl md:text-3xl font-bold text-gray-800 mb-3"></h1>
                <div class="flex items-center gap-4 text-gray-500 text-sm mb-4">
                    <span><i class="fas fa-user mr-1"></i><span id="articleAuthor"></span></span>
                    <span><i class="fas fa-clock mr-1"></i><span id="articleDate"></span></span>
                    <span><i class="fas fa-eye mr-1"></i><span id="articleViews"></span> views</span>
                </div>
                
                <!-- Share Buttons -->
                <div class="flex flex-wrap items-center gap-2 mb-4 pb-4 border-b">
                    <span class="text-gray-600 text-sm font-medium mr-2"><i class="fas fa-share-alt mr-1"></i>Share:</span>
                    <button onclick="shareToFacebook()" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fab fa-facebook-f"></i><span class="hidden sm:inline">Facebook</span>
                    </button>
                    <button onclick="shareToTwitter()" class="bg-sky-500 hover:bg-sky-600 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fab fa-twitter"></i><span class="hidden sm:inline">Twitter</span>
                    </button>
                    <button onclick="shareToWhatsApp()" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fab fa-whatsapp"></i><span class="hidden sm:inline">WhatsApp</span>
                    </button>
                    <button onclick="shareToTelegram()" class="bg-blue-400 hover:bg-blue-500 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fab fa-telegram-plane"></i><span class="hidden sm:inline">Telegram</span>
                    </button>
                    <button onclick="shareToLinkedIn()" class="bg-blue-700 hover:bg-blue-800 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fab fa-linkedin-in"></i><span class="hidden sm:inline">LinkedIn</span>
                    </button>
                    <button onclick="shareToViber()" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fab fa-viber"></i><span class="hidden sm:inline">Viber</span>
                    </button>
                    <button onclick="shareByEmail()" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition">
                        <i class="fas fa-envelope"></i><span class="hidden sm:inline">Email</span>
                    </button>
                    <button onclick="copyArticleLink()" class="bg-gray-800 hover:bg-gray-900 text-white px-3 py-2 rounded-lg text-sm flex items-center gap-1 transition" id="copyLinkBtn">
                        <i class="fas fa-link"></i><span class="hidden sm:inline">Copy Link</span>
                    </button>
                </div>
                <!-- In-Article Ad -->
                <div id="articleAdContainer" class="my-4"></div>
                <div id="articleContent" class="text-gray-700 leading-relaxed"></div>
                <div class="mt-8 border-t pt-6">
                    <h3 class="text-lg font-bold mb-4"><i class="fas fa-comments mr-2"></i>Comments</h3>
                    <form onsubmit="addComment(event)" class="mb-4">
                        <input type="hidden" id="commentArticleId">
                        <div class="flex gap-2">
                            <input type="text" id="commentName" placeholder="Your Name" class="border rounded px-3 py-2 w-1/3" required>
                            <input type="text" id="commentText" placeholder="Write a comment..." class="border rounded px-3 py-2 flex-1" required>
                            <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Post</button>
                        </div>
                    </form>
                    <div id="commentsContainer" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Bar -->
    <div class="bg-red-700 text-white text-sm py-1">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <span id="currentDate"></span>
                <span id="currentTime"></span>
            </div>
            <div class="flex items-center gap-4" id="headerSocialLinks">
                <a href="#" target="_blank" class="hover:text-red-200"><i class="fab fa-facebook-f"></i></a>
                <a href="#" target="_blank" class="hover:text-red-200"><i class="fab fa-twitter"></i></a>
                <a href="#" target="_blank" class="hover:text-red-200"><i class="fab fa-youtube"></i></a>
                <a href="#" target="_blank" class="hover:text-red-200"><i class="fab fa-instagram"></i></a>
            </div>
            <div class="flex items-center">
                <button onclick="openLoginModal()" class="hover:text-red-200 ml-2 flex items-center gap-1" title="Admin Login">
                    <i class="fas fa-user-shield"></i>
                    <span class="hidden md:inline">Login</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="relative w-14 h-14 md:w-16 md:h-16" id="headerLogoContainer">
                        <div class="absolute inset-0 rounded-xl overflow-hidden shadow-xl border-3 border-red-600 bg-gradient-to-br from-red-600 to-red-800">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" alt="Janki Temple" class="w-full h-full object-cover opacity-90" id="headerLogoImg">
                            <div class="absolute inset-0 bg-gradient-to-t from-red-800/70 via-transparent to-red-600/30" id="headerLogoOverlay"></div>
                        </div>
                        <div class="absolute -inset-0.5 rounded-xl border-2 border-yellow-400 animate-pulse"></div>
                        <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg">
                            <i class="fas fa-om text-red-700 text-xs"></i>
                        </div>
                    </div>
                    <div>
                        <h1 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-red-700 via-red-600 to-orange-600 bg-clip-text text-transparent" id="headerTitleText">Hamro Mithila</h1>
                        <p class="text-xs text-gray-500 flex items-center gap-1" id="headerTaglineText">
                            <i class="fas fa-newspaper text-red-500 text-xs"></i>
                            <span>मिथिलाको विश्वसनीय समाचार पोर्टल</span>
                        </p>
                    </div>
                </div>
                <div class="hidden md:flex items-center gap-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="खोज्नुहोस्..." class="border rounded-full px-4 py-2 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-red-500" onkeyup="searchNews(event)">
                        <button class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500" onclick="performSearch()"><i class="fas fa-search"></i></button>
                    </div>
                </div>
                <button class="md:hidden text-2xl" onclick="toggleMobileMenu()"><i class="fas fa-bars"></i></button>
            </div>
        </div>
        <nav class="bg-red-700">
            <div class="container mx-auto px-4">
                <ul id="mainNav" class="hidden md:flex items-center gap-1 text-white text-sm font-medium">
                    <li><a href="#" onclick="filterByCategory('all')" class="block px-4 py-3 hover:bg-red-800 bg-red-800">गृहपृष्ठ</a></li>
                </ul>
            </div>
        </nav>
        <div id="mobileMenu" class="hidden md:hidden bg-white border-t">
            <ul id="mobileNav" class="text-gray-700">
                <li><a href="#" onclick="filterByCategory('all')" class="block px-4 py-3 border-b hover:bg-gray-100">गृहपृष्ठ</a></li>
            </ul>
        </div>
    </header>

    <!-- Header Ad Banner -->
    <div id="headerAdContainer" class="container mx-auto px-4 py-2"></div>

    <!-- Breaking News Ticker -->
    <div class="bg-yellow-400 py-2">
        <div class="container mx-auto px-4 flex items-center">
            <span class="bg-red-600 text-white px-3 py-1 text-sm font-bold mr-4 whitespace-nowrap animate-pulse">ब्रेकिंग</span>
            <div class="ticker-wrap overflow-hidden flex-1">
                <div class="ticker" id="breakingTicker"></div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div class="lg:col-span-2">
                <div id="featuredNews" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"></div>
                <div id="categorySections"></div>
            </div>
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                    <h3 class="font-bold text-lg text-gray-800 border-b-2 border-red-600 pb-2 mb-4">
                        <i class="fas fa-fire text-red-600 mr-2"></i>ट्रेन्डिङ
                    </h3>
                    <div class="space-y-4" id="trendingNews"></div>
                </div>

                <!-- Sidebar Ad -->
                <div id="sidebarAdContainer" class="mb-6"></div>

                <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                    <h3 class="font-bold text-lg text-gray-800 border-b-2 border-red-600 pb-2 mb-4">
                        <i class="fas fa-video text-red-600 mr-2"></i>भिडियो
                    </h3>
                    <div class="relative cursor-pointer group">
                        <img src="https://images.unsplash.com/photo-1533900298318-6b8da08a523e?w=400&h=250&fit=crop" alt="Video" class="w-full h-48 object-cover rounded">
                        <div class="absolute inset-0 bg-black/30 flex items-center justify-center group-hover:bg-black/50 transition">
                            <div class="w-16 h-16 bg-red-600 rounded-full flex items-center justify-center">
                                <i class="fas fa-play text-white text-xl ml-1"></i>
                            </div>
                        </div>
                    </div>
                    <h4 class="font-semibold text-gray-800 mt-3 text-sm">मिथिला क्षेत्रको विशेष रिपोर्ट</h4>
                </div>

                <div class="bg-white rounded-lg shadow-md p-4 mb-6">
                    <h3 class="font-bold text-lg text-gray-800 border-b-2 border-red-600 pb-2 mb-4">श्रेणीहरू</h3>
                    <div class="flex flex-wrap gap-2" id="sidebarCategories"></div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-4">
                    <h3 class="font-bold text-lg text-gray-800 border-b-2 border-red-600 pb-2 mb-4">
                        <i class="fas fa-share-alt text-red-500 mr-2"></i>हामीलाई फलो गर्नुहोस्
                    </h3>
                    <p class="text-xs text-gray-500 mb-3">हाम्रो आधिकारिक सामाजिक सञ्जालमा जोडिनुहोस्</p>
                    <div class="space-y-2" id="sidebarSocialLinks">
                        <a href="#" target="_blank" class="flex items-center gap-3 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition">
                            <i class="fab fa-facebook-f text-lg w-6"></i>
                            <div>
                                <span class="font-medium">Facebook</span>
                                <p class="text-xs text-blue-200">हाम्रो पेज लाइक गर्नुहोस्</p>
                            </div>
                        </a>
                        <a href="#" target="_blank" class="flex items-center gap-3 bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 transition">
                            <i class="fab fa-youtube text-lg w-6"></i>
                            <div>
                                <span class="font-medium">YouTube</span>
                                <p class="text-xs text-red-200">च्यानल सब्सक्राइब गर्नुहोस्</p>
                            </div>
                        </a>
                        <a href="#" target="_blank" class="flex items-center gap-3 bg-sky-500 text-white py-3 px-4 rounded-lg hover:bg-sky-600 transition">
                            <i class="fab fa-twitter text-lg w-6"></i>
                            <div>
                                <span class="font-medium">Twitter</span>
                                <p class="text-xs text-sky-200">हामीलाई फलो गर्नुहोस्</p>
                            </div>
                        </a>
                        <a href="#" target="_blank" class="flex items-center gap-3 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white py-3 px-4 rounded-lg hover:opacity-90 transition">
                            <i class="fab fa-instagram text-lg w-6"></i>
                            <div>
                                <span class="font-medium">Instagram</span>
                                <p class="text-xs text-pink-100">फोटो र भिडियो हेर्नुहोस्</p>
                            </div>
                        </a>
                        <a href="#" target="_blank" class="flex items-center gap-3 bg-black text-white py-3 px-4 rounded-lg hover:bg-gray-800 transition" id="tiktokLink" style="display:none;">
                            <i class="fab fa-tiktok text-lg w-6"></i>
                            <div>
                                <span class="font-medium">TikTok</span>
                                <p class="text-xs text-gray-300">भाइरल भिडियो हेर्नुहोस्</p>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer Ad Banner -->
    <div id="footerAdContainer" class="container mx-auto px-4 py-4"></div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-8">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="relative w-14 h-14" id="footerLogoContainer">
                            <div class="absolute inset-0 rounded-xl overflow-hidden border-2 border-red-500 shadow-lg bg-gradient-to-br from-red-600 to-red-800">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg" alt="Janki Temple" class="w-full h-full object-cover opacity-90" id="footerLogoImg">
                                <div class="absolute inset-0 bg-gradient-to-t from-red-800/70 via-transparent to-red-600/30" id="footerLogoOverlay"></div>
                            </div>
                            <div class="absolute -inset-0.5 rounded-xl border border-yellow-400/50"></div>
                            <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center">
                                <i class="fas fa-om text-red-700 text-[8px]"></i>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent" id="footerTitleText">Hamro Mithila</h3>
                            <p class="text-xs text-gray-400 flex items-center gap-1">
                                <i class="fas fa-newspaper text-red-400 text-xs"></i>
                                <span>News Portal</span>
                            </p>
                        </div>
                    </div>
                    <p class="text-gray-400 text-sm" id="footerAboutDesc">मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">द्रुत लिंकहरू</h4>
                    <ul class="space-y-2 text-gray-400" id="footerQuickLinks">
                        <li><a href="#" onclick="openFooterPage(0); return false;" class="hover:text-white cursor-pointer">हाम्रो बारेमा</a></li>
                        <li><a href="#" onclick="openFooterPage(1); return false;" class="hover:text-white cursor-pointer">सम्पर्क</a></li>
                        <li><a href="#" onclick="openFooterPage(2); return false;" class="hover:text-white cursor-pointer">विज्ञापन</a></li>
                        <li><a href="#" onclick="openFooterPage(3); return false;" class="hover:text-white cursor-pointer">गोपनीयता नीति</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">श्रेणीहरू</h4>
                    <ul class="space-y-2 text-gray-400" id="footerCategories"></ul>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-4">सम्पर्क</h4>
                    <ul class="space-y-2 text-gray-400 text-sm" id="footerContactInfo">
                        <li><i class="fas fa-map-marker-alt mr-2"></i><span id="footerAddress">जनकपुरधाम, मधेश प्रदेश</span></li>
                        <li><i class="fas fa-phone mr-2"></i><span id="footerPhone">+977-41-520XXX</span></li>
                        <li><i class="fas fa-envelope mr-2"></i><span id="footerEmail">info@hamromithila.com</span></li>
                    </ul>
                    <div class="mt-4 flex gap-3" id="footerSocialIcons">
                        <a href="#" target="_blank" class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center hover:bg-blue-700"><i class="fab fa-facebook-f text-sm"></i></a>
                        <a href="#" target="_blank" class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center hover:bg-red-700"><i class="fab fa-youtube text-sm"></i></a>
                        <a href="#" target="_blank" class="w-8 h-8 bg-sky-500 rounded-full flex items-center justify-center hover:bg-sky-600"><i class="fab fa-twitter text-sm"></i></a>
                        <a href="#" target="_blank" class="w-8 h-8 bg-pink-600 rounded-full flex items-center justify-center hover:bg-pink-700"><i class="fab fa-instagram text-sm"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400 text-sm">
                <p id="footerCopyrightLine">© 2024 Hamro Mithila. सर्वाधिकार सुरक्षित।</p>
            </div>
        </div>
    </footer>

    <script>
        // Database
        const DB = {
            get: (key) => JSON.parse(localStorage.getItem('hm_' + key)) || null,
            set: (key, value) => localStorage.setItem('hm_' + key, JSON.stringify(value)),
            remove: (key) => localStorage.removeItem('hm_' + key)
        };

        // Default Data
        const defaultUsers = [
            { id: 1, name: 'Admin User', username: 'admin', email: 'admin@hamromithila.com', password: 'admin123', role: 'admin', active: true, lastLogin: null },
            { id: 2, name: 'Editor User', username: 'editor', email: 'editor@hamromithila.com', password: 'editor123', role: 'editor', active: true, lastLogin: null },
            { id: 3, name: 'Author User', username: 'author', email: 'author@hamromithila.com', password: 'author123', role: 'author', active: true, lastLogin: null }
        ];

        const defaultCategories = [
            { id: 1, name: 'राजनीति', color: 'blue' },
            { id: 2, name: 'समाज', color: 'green' },
            { id: 3, name: 'अर्थ/वाणिज्य', color: 'yellow' },
            { id: 4, name: 'खेलकुद', color: 'orange' },
            { id: 5, name: 'मनोरञ्जन', color: 'pink' },
            { id: 6, name: 'प्रविधि', color: 'purple' }
        ];

        const defaultNews = [
            { id: 1, title: 'मिथिला क्षेत्रमा ऐतिहासिक विकास अभियान शुरु', summary: 'मधेश प्रदेश सरकारले विशेष बजेट विनियोजन गरेको छ।', content: 'मधेश प्रदेश सरकारले मिथिला क्षेत्रको समग्र विकासका लागि ऐतिहासिक कदम चालेको छ। प्रदेश सरकारले यस क्षेत्रमा पूर्वाधार विकास, शिक्षा, स्वास्थ्य र पर्यटन प्रवर्द्धनका लागि विशेष बजेट विनियोजन गर्ने निर्णय गरेको छ।', category: 'राजनीति', image: 'https://images.unsplash.com/photo-1585829365295-ab7cd400c167?w=800&h=450&fit=crop', date: new Date().toISOString(), featured: true, trending: true, published: true, authorId: 1, authorName: 'Admin User', views: 1250 },
            { id: 2, title: 'राष्ट्रिय क्रिकेट टोलीमा मिथिला क्षेत्रका खेलाडी', summary: 'राष्ट्रिय टोलीमा दुई होनहार खेलाडी समावेश।', content: 'नेपाल क्रिकेट संघले आगामी अन्तर्राष्ट्रिय प्रतियोगिताको लागि राष्ट्रिय टोलीको घोषणा गरेको छ।', category: 'खेलकुद', image: 'https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=400&h=250&fit=crop', date: new Date(Date.now() - 3600000).toISOString(), featured: true, trending: true, published: true, authorId: 1, authorName: 'Admin User', views: 2341 },
            { id: 3, title: 'मैथिली संगीतको नयाँ एल्बम रिलिज', summary: 'परम्परागत मैथिली गीतहरूको आधुनिक प्रस्तुति।', content: 'मिथिला क्षेत्रका लोकप्रिय गायकले आफ्नो नयाँ मैथिली संगीत एल्बम रिलिज गरेका छन्।', category: 'मनोरञ्जन', image: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=200&h=150&fit=crop', date: new Date(Date.now() - 7200000).toISOString(), featured: false, trending: true, published: true, authorId: 2, authorName: 'Editor User', views: 1567 },
            { id: 4, title: 'जनकपुरधाममा स्वास्थ्य शिविर सम्पन्न', summary: 'निःशुल्क उपचार सेवामा सयौं बिरामी।', content: 'स्थानीय स्वास्थ्य संस्थाको आयोजनामा जनकपुरधाममा दुई दिने निःशुल्क स्वास्थ्य शिविर सम्पन्न भएको छ।', category: 'समाज', image: 'https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=300&h=200&fit=crop', date: new Date(Date.now() - 10800000).toISOString(), featured: true, trending: false, published: true, authorId: 2, authorName: 'Editor User', views: 789 },
            { id: 5, title: 'मिथिला महोत्सवमा हजारौं पर्यटक', summary: 'वार्षिक मिथिला महोत्सवमा देशविदेशबाट सहभागी।', content: 'जनकपुरधाममा आयोजित वार्षिक मिथिला महोत्सवले यस वर्ष पनि हजारौं पर्यटकहरूलाई आकर्षित गरेको छ।', category: 'समाज', image: 'https://images.unsplash.com/photo-1540039155733-5bb30b53aa14?w=200&h=150&fit=crop', date: new Date(Date.now() - 14400000).toISOString(), featured: false, trending: true, published: true, authorId: 1, authorName: 'Admin User', views: 3421 }
        ];

        const defaultBreakingNews = [
            { id: 1, text: 'मिथिला क्षेत्रमा नयाँ विकास योजना सुरु', articleId: 1 },
            { id: 2, text: 'जनकपुरधाममा धार्मिक पर्यटन बढ्दो', articleId: null },
            { id: 3, text: 'राष्ट्रिय टोलीमा मिथिलाका खेलाडी', articleId: 2 }
        ];

        const defaultAds = [
            { id: 1, title: 'Sample Sidebar Ad', image: 'https://via.placeholder.com/300x250/ff6b6b/ffffff?text=Your+Ad+Here', link: 'https://example.com', placement: 'sidebar', active: true, clicks: 0, createdBy: 1 },
            { id: 2, title: 'Sample Header Ad', image: 'https://via.placeholder.com/728x90/4ecdc4/ffffff?text=Advertise+With+Us', link: 'https://example.com', placement: 'header', active: true, clicks: 0, createdBy: 1 }
        ];

        let currentUser = null;

        function initializeData() {
            if (!DB.get('users')) DB.set('users', defaultUsers);
            if (!DB.get('categories')) DB.set('categories', defaultCategories);
            if (!DB.get('news')) DB.set('news', defaultNews);
            if (!DB.get('breakingNews')) DB.set('breakingNews', defaultBreakingNews);
            if (!DB.get('ads')) DB.set('ads', defaultAds);
            if (!DB.get('comments')) DB.set('comments', []);
            if (!DB.get('activityLog')) DB.set('activityLog', []);
            
            const savedSession = DB.get('session');
            if (savedSession) {
                const users = DB.get('users');
                currentUser = users.find(u => u.id === savedSession.userId);
                if (currentUser && currentUser.active) openDashboard();
            }
        }

        // Toast
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast px-4 py-3 rounded-lg shadow-lg text-white flex items-center gap-2 ${type === 'success' ? 'bg-green-600' : 'bg-red-600'}`;
            toast.innerHTML = `<i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i> ${message}`;
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        // Auth
        function openLoginModal() {
            if (currentUser) { openDashboard(); return; }
            document.getElementById('loginModal').classList.remove('hidden');
        }
        function closeLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }
        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const users = DB.get('users');
            const user = users.find(u => u.username === username && u.password === password);
            if (user) {
                if (!user.active) { showToast('Account deactivated!', 'error'); return; }
                currentUser = user;
                user.lastLogin = new Date().toISOString();
                DB.set('users', users);
                DB.set('session', { userId: user.id });
                logActivity('Logged in', 'auth');
                closeLoginModal();
                openDashboard();
                showToast(`Welcome, ${user.name}!`, 'success');
            } else {
                showToast('Invalid credentials!', 'error');
            }
        }
        function logout() {
            logActivity('Logged out', 'auth');
            currentUser = null;
            DB.remove('session');
            closeDashboard();
            showToast('Logged out!', 'success');
        }

        // Activity Log
        function logActivity(action, type = 'general') {
            if (!currentUser) return;
            const log = DB.get('activityLog') || [];
            log.unshift({ id: Date.now(), userId: currentUser.id, userName: currentUser.name, userRole: currentUser.role, action, type, timestamp: new Date().toISOString() });
            DB.set('activityLog', log.slice(0, 100));
        }
        function clearActivityLog() {
            if (currentUser?.role !== 'admin') { showToast('Admin only!', 'error'); return; }
            if (confirm('Clear all logs?')) { DB.set('activityLog', []); loadActivityLog(); showToast('Cleared!', 'success'); }
        }

        // Dashboard
        function openDashboard() {
            document.getElementById('adminDashboard').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            updateDashboardUI();
            loadDashboardData();
            loadSocialLinksForm();
            loadSiteSettingsForm();
            loadBrandingForm();
            loadContactInfoForm();
            loadFooterSettingsForm();
            updateDashboardTime();
            setInterval(updateDashboardTime, 1000);
        }
        function closeDashboard() {
            document.getElementById('adminDashboard').classList.add('hidden');
            document.body.style.overflow = '';
        }
        function updateDashboardUI() {
            if (!currentUser) return;
            document.getElementById('currentUserAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            document.getElementById('currentUserName').textContent = currentUser.name;
            document.getElementById('currentUserRole').textContent = currentUser.role.charAt(0).toUpperCase() + currentUser.role.slice(1);
            document.getElementById('profileName').value = currentUser.name;
            document.getElementById('profileEmail').value = currentUser.email;
            const isAdmin = currentUser.role === 'admin';
            document.querySelectorAll('.admin-only').forEach(el => el.style.display = isAdmin ? '' : 'none');
            document.querySelectorAll('.admin-only-btn').forEach(el => el.style.display = isAdmin ? '' : 'none');
        }
        function updateDashboardTime() { document.getElementById('dashboardTime').textContent = new Date().toLocaleTimeString(); }
        function switchDashboardTab(tab) {
            if (tab === 'users' && currentUser?.role !== 'admin') { showToast('Admin only!', 'error'); return; }
            document.querySelectorAll('.sidebar-link').forEach(l => l.classList.remove('active'));
            document.querySelector(`[data-tab="${tab}"]`)?.classList.add('active');
            document.querySelectorAll('.dashboard-tab').forEach(t => t.classList.add('hidden'));
            document.getElementById(`dash-${tab}`).classList.remove('hidden');
            const titles = { overview: 'Dashboard', news: 'News Articles', categories: 'Categories', breaking: 'Breaking News', ads: 'Advertisements', social: 'Social Media Links', logo: 'Logo & Branding', media: 'Media Library', users: 'Team Members', contact: 'Contact Information', footer: 'Footer Settings', activity: 'Activity Log', settings: 'Settings' };
            document.getElementById('dashboardTitle').textContent = titles[tab] || 'Dashboard';
            loadDashboardData();
        }
        function loadDashboardData() {
            loadStatistics();
            loadNewsTable();
            loadCategoriesList();
            loadBreakingNewsList();
            loadAdsList();
            loadUsersTable();
            loadActivityLog();
            loadRecentArticles();
            loadRecentActivity();
        }

        // Statistics
        function loadStatistics() {
            const news = DB.get('news') || [];
            const categories = DB.get('categories') || [];
            const users = DB.get('users') || [];
            const ads = (DB.get('ads') || []).filter(a => a.active);
            document.getElementById('statArticles2').textContent = news.length;
            document.getElementById('statCategories2').textContent = categories.length;
            document.getElementById('statViews2').textContent = news.reduce((sum, n) => sum + (n.views || 0), 0).toLocaleString();
            document.getElementById('statUsers2').textContent = users.length;
            document.getElementById('statAds2').textContent = ads.length;
        }
        function loadRecentArticles() {
            const news = DB.get('news') || [];
            document.getElementById('recentArticles').innerHTML = news.slice(0, 5).map(n => `
                <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg">
                    <img src="${n.image}" class="w-12 h-12 object-cover rounded">
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-medium text-gray-800 truncate">${n.title}</p>
                        <p class="text-xs text-gray-500">${timeAgo(n.date)}</p>
                    </div>
                </div>
            `).join('') || '<p class="text-gray-500 text-sm">No articles.</p>';
        }
        function loadRecentActivity() {
            const log = DB.get('activityLog') || [];
            document.getElementById('recentActivity').innerHTML = log.slice(0, 5).map(l => `
                <div class="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg">
                    <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center"><i class="fas fa-user text-gray-500 text-sm"></i></div>
                    <div class="flex-1"><p class="text-sm"><span class="font-medium">${l.userName}</span> ${l.action}</p><p class="text-xs text-gray-500">${timeAgo(l.timestamp)}</p></div>
                </div>
            `).join('') || '<p class="text-gray-500 text-sm">No activity.</p>';
        }

        // News CRUD
        function loadNewsTable() {
            const news = DB.get('news') || [];
            document.getElementById('newsTableBody2').innerHTML = news.map(n => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3"><img src="${n.image}" class="w-16 h-12 object-cover rounded"></td>
                    <td class="px-4 py-3"><p class="font-medium text-gray-800 truncate max-w-xs">${n.title}</p><p class="text-xs text-gray-500">${n.views || 0} views</p></td>
                    <td class="px-4 py-3"><span class="bg-gray-100 px-2 py-1 rounded text-sm">${n.category}</span></td>
                    <td class="px-4 py-3 text-sm">${n.authorName || 'Unknown'}</td>
                    <td class="px-4 py-3">${n.published ? '<span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Published</span>' : '<span class="bg-yellow-100 text-yellow-700 px-2 py-1 rounded text-xs">Draft</span>'}</td>
                    <td class="px-4 py-3">
                        <button onclick="editNews(${n.id})" class="text-blue-600 hover:text-blue-800 p-1"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteNews(${n.id})" class="text-red-600 hover:text-red-800 p-1 ml-1"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('') || '<tr><td colspan="6" class="text-center py-8 text-gray-500">No articles.</td></tr>';
        }
        function filterNewsTable() {
            const query = document.getElementById('newsSearch').value.toLowerCase();
            document.querySelectorAll('#newsTableBody2 tr').forEach(row => {
                row.style.display = row.textContent.toLowerCase().includes(query) ? '' : 'none';
            });
        }
        function openNewsForm(id = null) {
            document.getElementById('newsFormModal').classList.remove('hidden');
            document.getElementById('newsFormTitle').innerHTML = id ? '<i class="fas fa-edit mr-2"></i>Edit Article' : '<i class="fas fa-newspaper mr-2"></i>Add New Article';
            const categories = DB.get('categories') || [];
            document.getElementById('newsCategory').innerHTML = categories.map(c => `<option value="${c.name}">${c.name}</option>`).join('');
            if (id) {
                const news = DB.get('news').find(n => n.id === id);
                if (news) {
                    document.getElementById('newsId').value = news.id;
                    document.getElementById('newsTitle').value = news.title;
                    document.getElementById('newsCategory').value = news.category;
                    document.getElementById('newsImage').value = news.image;
                    document.getElementById('newsSummary').value = news.summary || '';
                    document.getElementById('newsContent').value = news.content;
                    document.getElementById('newsFeatured').checked = news.featured;
                    document.getElementById('newsTrending').checked = news.trending;
                    document.getElementById('newsPublished').checked = news.published !== false;
                }
            }
        }
        function closeNewsForm() { document.getElementById('newsFormModal').classList.add('hidden'); document.getElementById('newsForm').reset(); document.getElementById('newsId').value = ''; }
        function saveNews(e) {
            e.preventDefault();
            const news = DB.get('news') || [];
            const id = document.getElementById('newsId').value;
            const newsItem = {
                id: id ? parseInt(id) : Date.now(),
                title: document.getElementById('newsTitle').value,
                category: document.getElementById('newsCategory').value,
                image: document.getElementById('newsImage').value,
                summary: document.getElementById('newsSummary').value,
                content: document.getElementById('newsContent').value,
                featured: document.getElementById('newsFeatured').checked,
                trending: document.getElementById('newsTrending').checked,
                published: document.getElementById('newsPublished').checked,
                date: id ? news.find(n => n.id === parseInt(id))?.date : new Date().toISOString(),
                views: id ? news.find(n => n.id === parseInt(id))?.views || 0 : 0,
                authorId: id ? news.find(n => n.id === parseInt(id))?.authorId : currentUser.id,
                authorName: id ? news.find(n => n.id === parseInt(id))?.authorName : currentUser.name
            };
            if (id) { const index = news.findIndex(n => n.id === parseInt(id)); news[index] = newsItem; logActivity(`Updated: "${newsItem.title.substring(0, 30)}..."`, 'news'); }
            else { news.unshift(newsItem); logActivity(`Created: "${newsItem.title.substring(0, 30)}..."`, 'news'); }
            DB.set('news', news);
            closeNewsForm();
            loadDashboardData();
            renderFrontend();
            showToast(id ? 'Article updated!' : 'Article published!', 'success');
        }
        function editNews(id) { openNewsForm(id); }
        function deleteNews(id) {
            if (confirm('Delete this article?')) {
                const news = DB.get('news');
                const article = news.find(n => n.id === id);
                DB.set('news', news.filter(n => n.id !== id));
                logActivity(`Deleted: "${article?.title.substring(0, 30)}..."`, 'news');
                loadDashboardData();
                renderFrontend();
                showToast('Deleted!', 'success');
            }
        }

        // Categories
        function loadCategoriesList() {
            const categories = DB.get('categories') || [];
            const news = DB.get('news') || [];
            document.getElementById('categoriesList2').innerHTML = categories.map(c => {
                const count = news.filter(n => n.category === c.name).length;
                return `<div class="bg-gray-50 p-4 rounded-lg border hover:shadow-md transition">
                    <div class="flex justify-between items-start">
                        <div class="flex items-center gap-3"><div class="w-4 h-4 rounded-full bg-${c.color}-500"></div><div><p class="font-medium">${c.name}</p><p class="text-sm text-gray-500">${count} articles</p></div></div>
                        <button onclick="deleteCategory(${c.id})" class="text-red-600 hover:text-red-800"><i class="fas fa-trash"></i></button>
                    </div>
                </div>`;
            }).join('');
        }
        function openCategoryForm() { document.getElementById('categoryFormModal').classList.remove('hidden'); }
        function closeCategoryForm() { document.getElementById('categoryFormModal').classList.add('hidden'); document.getElementById('categoryForm').reset(); }
        function saveCategory(e) {
            e.preventDefault();
            const categories = DB.get('categories') || [];
            categories.push({ id: Date.now(), name: document.getElementById('categoryName').value, color: document.getElementById('categoryColor').value });
            DB.set('categories', categories);
            logActivity(`Created category: "${document.getElementById('categoryName').value}"`, 'category');
            closeCategoryForm();
            loadDashboardData();
            renderFrontend();
            showToast('Category added!', 'success');
        }
        function deleteCategory(id) {
            if (confirm('Delete?')) {
                const categories = DB.get('categories');
                DB.set('categories', categories.filter(c => c.id !== id));
                loadDashboardData();
                renderFrontend();
                showToast('Deleted!', 'success');
            }
        }

        // Breaking News
        function loadBreakingNewsList() {
            const breaking = DB.get('breakingNews') || [];
            const news = DB.get('news') || [];
            document.getElementById('breakingNewsList2').innerHTML = breaking.map(b => {
                const linkedArticle = b.articleId ? news.find(n => n.id === b.articleId) : null;
                return `<div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center gap-2"><i class="fas fa-bolt text-yellow-500"></i><span class="font-bold text-lg">${b.text}</span></div>
                            ${linkedArticle ? `
                                <div class="mt-2 p-2 bg-white rounded border">
                                    <div class="flex items-start gap-3">
                                        <img src="${linkedArticle.image}" class="w-20 h-14 object-cover rounded">
                                        <div class="flex-1">
                                            <p class="text-sm font-medium text-gray-800">${linkedArticle.title}</p>
                                            <p class="text-xs text-gray-500 mt-1"><i class="fas fa-link mr-1 text-green-500"></i>Linked Article • ${linkedArticle.category}</p>
                                        </div>
                                    </div>
                                </div>
                            ` : '<p class="text-xs text-gray-400 mt-1"><i class="fas fa-unlink mr-1"></i>No article linked (text only)</p>'}
                        </div>
                        <div class="flex gap-2 ml-4">
                            <button onclick="viewArticle(${b.articleId})" class="text-blue-600 hover:text-blue-800 p-2 ${!linkedArticle ? 'hidden' : ''}" title="View Article"><i class="fas fa-eye"></i></button>
                            <button onclick="deleteBreakingNews(${b.id})" class="text-red-600 hover:text-red-800 p-2" title="Delete"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>`;
            }).join('') || '<p class="text-gray-500">No breaking news. Click "Add Breaking News" to create one.</p>';
        }
        
        function toggleBreakingNewsType(type) {
            const existingSection = document.getElementById('existingArticleSection');
            const newSection = document.getElementById('newArticleSection');
            
            if (type === 'existing') {
                existingSection.classList.remove('hidden');
                newSection.classList.add('hidden');
                document.getElementById('breakingTypeExisting').checked = true;
            } else {
                existingSection.classList.add('hidden');
                newSection.classList.remove('hidden');
                document.getElementById('breakingTypeNew').checked = true;
            }
        }
        
        function openBreakingForm() {
            document.getElementById('breakingFormModal').classList.remove('hidden');
            const news = DB.get('news') || [];
            const categories = DB.get('categories') || [];
            
            // Populate existing articles dropdown
            document.getElementById('breakingArticle').innerHTML = '<option value="">-- Select an Article --</option>' + news.filter(n => n.published).map(n => `<option value="${n.id}">${n.title.substring(0, 50)}...</option>`).join('');
            
            // Populate categories for new article
            document.getElementById('breakingNewsCategory').innerHTML = categories.map(c => `<option value="${c.name}">${c.name}</option>`).join('');
            
            // Reset to default state
            toggleBreakingNewsType('existing');
            document.getElementById('breakingImagePreview').style.display = 'none';
        }
        
        function closeBreakingForm() { 
            document.getElementById('breakingFormModal').classList.add('hidden'); 
            document.getElementById('breakingForm').reset();
            toggleBreakingNewsType('existing');
        }
        
        function saveBreakingNews(e) {
            e.preventDefault();
            
            const breakingText = document.getElementById('breakingText').value;
            const isNewArticle = document.getElementById('breakingTypeNew').checked;
            
            let articleId = null;
            
            if (isNewArticle) {
                // Validate new article fields
                const title = document.getElementById('breakingNewsTitle').value;
                const category = document.getElementById('breakingNewsCategory').value;
                const image = document.getElementById('breakingNewsImage').value;
                const content = document.getElementById('breakingNewsContent').value;
                
                if (!title || !category || !image || !content) {
                    showToast('Please fill all required fields for the new article!', 'error');
                    return;
                }
                
                // Create new article
                const news = DB.get('news') || [];
                const newArticle = {
                    id: Date.now(),
                    title: title,
                    category: category,
                    image: image,
                    summary: document.getElementById('breakingNewsSummary').value,
                    content: content,
                    featured: document.getElementById('breakingNewsFeatured').checked,
                    trending: document.getElementById('breakingNewsTrending').checked,
                    published: true,
                    date: new Date().toISOString(),
                    views: 0,
                    authorId: currentUser.id,
                    authorName: currentUser.name,
                    isBreakingNews: true
                };
                
                news.unshift(newArticle);
                DB.set('news', news);
                articleId = newArticle.id;
                
                logActivity(`Created breaking news article: "${title.substring(0, 30)}..."`, 'news');
            } else {
                // Link to existing article
                const selectedArticle = document.getElementById('breakingArticle').value;
                articleId = selectedArticle ? parseInt(selectedArticle) : null;
            }
            
            // Add breaking news entry
            const breaking = DB.get('breakingNews') || [];
            breaking.unshift({ 
                id: Date.now(), 
                text: breakingText, 
                articleId: articleId,
                createdAt: new Date().toISOString(),
                createdBy: currentUser.id
            });
            DB.set('breakingNews', breaking);
            
            logActivity(`Added breaking news: "${breakingText.substring(0, 30)}..."`, 'breaking');
            closeBreakingForm();
            loadDashboardData();
            renderBreakingNews();
            renderFrontend();
            showToast('Breaking news published!', 'success');
        }
        
        function deleteBreakingNews(id) {
            if (!confirm('Delete this breaking news?')) return;
            const breaking = DB.get('breakingNews');
            DB.set('breakingNews', breaking.filter(b => b.id !== id));
            loadDashboardData();
            renderBreakingNews();
            showToast('Deleted!', 'success');
        }

        // Advertisements
        function loadAdsList() {
            const ads = DB.get('ads') || [];
            document.getElementById('adsList').innerHTML = ads.map(a => `
                <div class="bg-gray-50 p-4 rounded-lg border hover:shadow-md transition">
                    <img src="${a.image}" class="w-full h-32 object-cover rounded mb-3" onerror="this.src='https://via.placeholder.com/300x100/cccccc/666666?text=Image+Error'">
                    <div class="flex justify-between items-start">
                        <div>
                            <p class="font-medium">${a.title}</p>
                            <p class="text-xs text-gray-500">${a.placement} • ${a.clicks || 0} clicks</p>
                            <span class="${a.active ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'} px-2 py-0.5 rounded text-xs mt-1 inline-block">${a.active ? 'Active' : 'Inactive'}</span>
                        </div>
                        <div class="flex gap-1">
                            <button onclick="editAd(${a.id})" class="text-blue-600 hover:text-blue-800 p-1"><i class="fas fa-edit"></i></button>
                            <button onclick="deleteAd(${a.id})" class="text-red-600 hover:text-red-800 p-1"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                </div>
            `).join('') || '<p class="text-gray-500 col-span-3">No advertisements.</p>';
        }
        function openAdForm(id = null) {
            document.getElementById('adFormModal').classList.remove('hidden');
            document.getElementById('adFormTitle').innerHTML = id ? '<i class="fas fa-edit mr-2"></i>Edit Advertisement' : '<i class="fas fa-ad mr-2"></i>Add Advertisement';
            document.getElementById('adPreview').classList.add('hidden');
            if (id) {
                const ad = DB.get('ads').find(a => a.id === id);
                if (ad) {
                    document.getElementById('adId').value = ad.id;
                    document.getElementById('adTitle').value = ad.title;
                    document.getElementById('adImage').value = ad.image;
                    document.getElementById('adLink').value = ad.link;
                    document.getElementById('adPlacement').value = ad.placement;
                    document.getElementById('adActive').checked = ad.active;
                    document.getElementById('adPreviewImg').src = ad.image;
                    document.getElementById('adPreview').classList.remove('hidden');
                }
            }
        }
        function closeAdForm() { document.getElementById('adFormModal').classList.add('hidden'); document.getElementById('adForm').reset(); document.getElementById('adId').value = ''; document.getElementById('adPreview').classList.add('hidden'); }
        function saveAd(e) {
            e.preventDefault();
            const ads = DB.get('ads') || [];
            const id = document.getElementById('adId').value;
            const adItem = {
                id: id ? parseInt(id) : Date.now(),
                title: document.getElementById('adTitle').value,
                image: document.getElementById('adImage').value,
                link: document.getElementById('adLink').value,
                placement: document.getElementById('adPlacement').value,
                active: document.getElementById('adActive').checked,
                clicks: id ? ads.find(a => a.id === parseInt(id))?.clicks || 0 : 0,
                createdBy: currentUser.id
            };
            if (id) { const index = ads.findIndex(a => a.id === parseInt(id)); ads[index] = adItem; logActivity(`Updated ad: "${adItem.title}"`, 'ad'); }
            else { ads.unshift(adItem); logActivity(`Created ad: "${adItem.title}"`, 'ad'); }
            DB.set('ads', ads);
            closeAdForm();
            loadDashboardData();
            renderAds();
            showToast(id ? 'Ad updated!' : 'Ad created!', 'success');
        }
        function editAd(id) { openAdForm(id); }
        function deleteAd(id) {
            if (confirm('Delete this ad?')) {
                const ads = DB.get('ads');
                DB.set('ads', ads.filter(a => a.id !== id));
                logActivity('Deleted ad', 'ad');
                loadDashboardData();
                renderAds();
                showToast('Deleted!', 'success');
            }
        }
        function trackAdClick(id) {
            const ads = DB.get('ads');
            const ad = ads.find(a => a.id === id);
            if (ad) { ad.clicks = (ad.clicks || 0) + 1; DB.set('ads', ads); }
        }

        // Users
        function loadUsersTable() {
            if (currentUser?.role !== 'admin') return;
            const users = DB.get('users') || [];
            document.getElementById('usersTableBody').innerHTML = users.map(u => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-${u.role === 'admin' ? 'red' : u.role === 'editor' ? 'blue' : 'green'}-500 text-white flex items-center justify-center font-bold">${u.name.charAt(0)}</div><span class="font-medium">${u.name}</span></div></td>
                    <td class="px-4 py-3 text-sm">${u.username}</td>
                    <td class="px-4 py-3"><span class="px-2 py-1 rounded text-xs font-medium ${u.role === 'admin' ? 'bg-red-100 text-red-700' : u.role === 'editor' ? 'bg-blue-100 text-blue-700' : 'bg-green-100 text-green-700'}">${u.role}</span></td>
                    <td class="px-4 py-3">${u.active ? '<span class="bg-green-100 text-green-700 px-2 py-1 rounded text-xs">Active</span>' : '<span class="bg-red-100 text-red-700 px-2 py-1 rounded text-xs">Inactive</span>'}</td>
                    <td class="px-4 py-3">
                        <button onclick="editUser(${u.id})" class="text-blue-600 hover:text-blue-800 p-1"><i class="fas fa-edit"></i></button>
                        ${u.id !== currentUser?.id ? `<button onclick="deleteUser(${u.id})" class="text-red-600 hover:text-red-800 p-1 ml-1"><i class="fas fa-trash"></i></button>` : ''}
                    </td>
                </tr>
            `).join('');
        }
        function openUserForm(id = null) {
            document.getElementById('userFormModal').classList.remove('hidden');
            document.getElementById('userFormTitle').innerHTML = id ? '<i class="fas fa-user-edit mr-2"></i>Edit User' : '<i class="fas fa-user-plus mr-2"></i>Add User';
            document.getElementById('passwordField').style.display = id ? 'none' : '';
            document.getElementById('userPassword').required = !id;
            if (id) {
                const user = DB.get('users').find(u => u.id === id);
                if (user) {
                    document.getElementById('userId').value = user.id;
                    document.getElementById('userName').value = user.name;
                    document.getElementById('userUsername').value = user.username;
                    document.getElementById('userEmail').value = user.email;
                    document.getElementById('userRole').value = user.role;
                    document.getElementById('userActive').checked = user.active;
                }
            }
        }
        function closeUserForm() { document.getElementById('userFormModal').classList.add('hidden'); document.getElementById('userForm').reset(); document.getElementById('userId').value = ''; }
        function saveUser(e) {
            e.preventDefault();
            const users = DB.get('users') || [];
            const id = document.getElementById('userId').value;
            const username = document.getElementById('userUsername').value;
            if (users.find(u => u.username === username && u.id !== parseInt(id))) { showToast('Username exists!', 'error'); return; }
            if (id) {
                const index = users.findIndex(u => u.id === parseInt(id));
                users[index] = { ...users[index], name: document.getElementById('userName').value, username, email: document.getElementById('userEmail').value, role: document.getElementById('userRole').value, active: document.getElementById('userActive').checked };
                logActivity(`Updated user: "${users[index].name}"`, 'user');
            } else {
                users.push({ id: Date.now(), name: document.getElementById('userName').value, username, email: document.getElementById('userEmail').value, password: document.getElementById('userPassword').value, role: document.getElementById('userRole').value, active: document.getElementById('userActive').checked, lastLogin: null });
                logActivity(`Created user: "${document.getElementById('userName').value}"`, 'user');
            }
            DB.set('users', users);
            closeUserForm();
            loadDashboardData();
            showToast(id ? 'Updated!' : 'Created!', 'success');
        }
        function editUser(id) { openUserForm(id); }
        function deleteUser(id) {
            if (id === currentUser?.id) { showToast('Cannot delete yourself!', 'error'); return; }
            if (confirm('Delete?')) { const users = DB.get('users'); DB.set('users', users.filter(u => u.id !== id)); loadDashboardData(); showToast('Deleted!', 'success'); }
        }

        // Activity Log
        function loadActivityLog() {
            const log = DB.get('activityLog') || [];
            document.getElementById('activityLogFull').innerHTML = log.map(l => `
                <div class="flex items-center gap-4 p-3 bg-gray-50 rounded-lg">
                    <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0"><i class="fas fa-user text-gray-500"></i></div>
                    <div class="flex-1"><p class="text-sm"><span class="font-medium">${l.userName}</span> (${l.userRole}) ${l.action}</p><p class="text-xs text-gray-500">${formatDateTime(l.timestamp)}</p></div>
                </div>
            `).join('') || '<p class="text-gray-500 text-center py-8">No activity.</p>';
        }

        // Profile & Settings
        function updateProfile(e) {
            e.preventDefault();
            const users = DB.get('users');
            const index = users.findIndex(u => u.id === currentUser.id);
            users[index].name = document.getElementById('profileName').value;
            users[index].email = document.getElementById('profileEmail').value;
            DB.set('users', users);
            currentUser = users[index];
            updateDashboardUI();
            showToast('Profile updated!', 'success');
        }
        function changePassword(e) {
            e.preventDefault();
            if (document.getElementById('currentPassword').value !== currentUser.password) { showToast('Wrong current password!', 'error'); return; }
            if (document.getElementById('newPassword').value !== document.getElementById('confirmPassword').value) { showToast('Passwords do not match!', 'error'); return; }
            const users = DB.get('users');
            const index = users.findIndex(u => u.id === currentUser.id);
            users[index].password = document.getElementById('newPassword').value;
            DB.set('users', users);
            currentUser = users[index];
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            showToast('Password changed!', 'success');
        }
        
        // Social Media Links
        function saveSocialLinks(e) {
            e.preventDefault();
            const socialLinks = {
                facebook: document.getElementById('socialFacebook').value,
                twitter: document.getElementById('socialTwitter').value,
                youtube: document.getElementById('socialYoutube').value,
                instagram: document.getElementById('socialInstagram').value,
                tiktok: document.getElementById('socialTiktok').value,
                linkedin: document.getElementById('socialLinkedin').value
            };
            DB.set('socialLinks', socialLinks);
            logActivity('Updated social media links', 'settings');
            renderSocialLinks();
            showToast('Social links saved!', 'success');
        }
        
        function loadSocialLinksForm() {
            const links = DB.get('socialLinks') || {};
            document.getElementById('socialFacebook').value = links.facebook || '';
            document.getElementById('socialTwitter').value = links.twitter || '';
            document.getElementById('socialYoutube').value = links.youtube || '';
            document.getElementById('socialInstagram').value = links.instagram || '';
            document.getElementById('socialTiktok').value = links.tiktok || '';
            document.getElementById('socialLinkedin').value = links.linkedin || '';
            // Also load into the Social Media tab
            if (document.getElementById('socialFacebook2')) {
                document.getElementById('socialFacebook2').value = links.facebook || '';
                document.getElementById('socialTwitter2').value = links.twitter || '';
                document.getElementById('socialYoutube2').value = links.youtube || '';
                document.getElementById('socialInstagram2').value = links.instagram || '';
                document.getElementById('socialTiktok2').value = links.tiktok || '';
                document.getElementById('socialLinkedin2').value = links.linkedin || '';
            }
        }
        
        function saveSocialLinksFromTab(e) {
            e.preventDefault();
            const socialLinks = {
                facebook: document.getElementById('socialFacebook2').value,
                twitter: document.getElementById('socialTwitter2').value,
                youtube: document.getElementById('socialYoutube2').value,
                instagram: document.getElementById('socialInstagram2').value,
                tiktok: document.getElementById('socialTiktok2').value,
                linkedin: document.getElementById('socialLinkedin2').value
            };
            DB.set('socialLinks', socialLinks);
            logActivity('Updated social media links', 'settings');
            // Sync with settings tab
            document.getElementById('socialFacebook').value = socialLinks.facebook;
            document.getElementById('socialTwitter').value = socialLinks.twitter;
            document.getElementById('socialYoutube').value = socialLinks.youtube;
            document.getElementById('socialInstagram').value = socialLinks.instagram;
            document.getElementById('socialTiktok').value = socialLinks.tiktok;
            document.getElementById('socialLinkedin').value = socialLinks.linkedin;
            renderSocialLinks();
            showToast('Social media links saved!', 'success');
        }
        
        function renderSocialLinks() {
            const links = DB.get('socialLinks') || {};
            // Header social links
            const headerSocial = document.getElementById('headerSocialLinks');
            if (headerSocial) {
                headerSocial.innerHTML = `
                    <a href="${links.facebook || '#'}" target="_blank" class="hover:text-red-200" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="${links.twitter || '#'}" target="_blank" class="hover:text-red-200" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="${links.youtube || '#'}" target="_blank" class="hover:text-red-200" title="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="${links.instagram || '#'}" target="_blank" class="hover:text-red-200" title="Instagram"><i class="fab fa-instagram"></i></a>
                `;
            }
            // Sidebar social links - Enhanced design
            const sidebarSocial = document.getElementById('sidebarSocialLinks');
            if (sidebarSocial) {
                let sidebarHtml = '';
                
                // Facebook
                sidebarHtml += `
                    <a href="${links.facebook || '#'}" target="_blank" class="flex items-center gap-3 bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition">
                        <i class="fab fa-facebook-f text-lg w-6"></i>
                        <div>
                            <span class="font-medium">Facebook</span>
                            <p class="text-xs text-blue-200">हाम्रो पेज लाइक गर्नुहोस्</p>
                        </div>
                    </a>
                `;
                
                // YouTube
                sidebarHtml += `
                    <a href="${links.youtube || '#'}" target="_blank" class="flex items-center gap-3 bg-red-600 text-white py-3 px-4 rounded-lg hover:bg-red-700 transition">
                        <i class="fab fa-youtube text-lg w-6"></i>
                        <div>
                            <span class="font-medium">YouTube</span>
                            <p class="text-xs text-red-200">च्यानल सब्सक्राइब गर्नुहोस्</p>
                        </div>
                    </a>
                `;
                
                // Twitter
                sidebarHtml += `
                    <a href="${links.twitter || '#'}" target="_blank" class="flex items-center gap-3 bg-sky-500 text-white py-3 px-4 rounded-lg hover:bg-sky-600 transition">
                        <i class="fab fa-twitter text-lg w-6"></i>
                        <div>
                            <span class="font-medium">Twitter</span>
                            <p class="text-xs text-sky-200">हामीलाई फलो गर्नुहोस्</p>
                        </div>
                    </a>
                `;
                
                // Instagram
                sidebarHtml += `
                    <a href="${links.instagram || '#'}" target="_blank" class="flex items-center gap-3 bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500 text-white py-3 px-4 rounded-lg hover:opacity-90 transition">
                        <i class="fab fa-instagram text-lg w-6"></i>
                        <div>
                            <span class="font-medium">Instagram</span>
                            <p class="text-xs text-pink-100">फोटो र भिडियो हेर्नुहोस्</p>
                        </div>
                    </a>
                `;
                
                // TikTok (only show if link exists)
                if (links.tiktok) {
                    sidebarHtml += `
                        <a href="${links.tiktok}" target="_blank" class="flex items-center gap-3 bg-black text-white py-3 px-4 rounded-lg hover:bg-gray-800 transition">
                            <i class="fab fa-tiktok text-lg w-6"></i>
                            <div>
                                <span class="font-medium">TikTok</span>
                                <p class="text-xs text-gray-300">भाइरल भिडियो हेर्नुहोस्</p>
                            </div>
                        </a>
                    `;
                }
                
                // LinkedIn (only show if link exists)
                if (links.linkedin) {
                    sidebarHtml += `
                        <a href="${links.linkedin}" target="_blank" class="flex items-center gap-3 bg-blue-700 text-white py-3 px-4 rounded-lg hover:bg-blue-800 transition">
                            <i class="fab fa-linkedin-in text-lg w-6"></i>
                            <div>
                                <span class="font-medium">LinkedIn</span>
                                <p class="text-xs text-blue-200">प्रोफेशनल नेटवर्क</p>
                            </div>
                        </a>
                    `;
                }
                
                sidebarSocial.innerHTML = sidebarHtml;
            }
        }
        
        // Site Settings
        function saveSiteSettings(e) {
            e.preventDefault();
            const siteSettings = {
                name: document.getElementById('siteName').value,
                tagline: document.getElementById('siteTagline').value,
                phone: document.getElementById('sitePhone').value,
                email: document.getElementById('siteEmail').value,
                address: document.getElementById('siteAddress').value
            };
            DB.set('siteSettings', siteSettings);
            logActivity('Updated site settings', 'settings');
            renderSiteSettings();
            showToast('Site settings saved!', 'success');
        }
        
        function loadSiteSettingsForm() {
            const settings = DB.get('siteSettings') || {};
            document.getElementById('siteName').value = settings.name || 'Hamro Mithila';
            document.getElementById('siteTagline').value = settings.tagline || 'मिथिलाको विश्वसनीय समाचार';
            document.getElementById('sitePhone').value = settings.phone || '+977-41-520XXX';
            document.getElementById('siteEmail').value = settings.email || 'info@hamromithila.com';
            document.getElementById('siteAddress').value = settings.address || 'जनकपुरधाम, मधेश प्रदेश';
        }
        
        function renderSiteSettings() {
            const settings = DB.get('siteSettings') || {};
            // Update footer contact info
            const footerContact = document.getElementById('footerContact');
            if (footerContact) {
                footerContact.innerHTML = `
                    <li><i class="fas fa-map-marker-alt mr-2"></i>${settings.address || 'जनकपुरधाम, मधेश प्रदेश'}</li>
                    <li><i class="fas fa-phone mr-2"></i>${settings.phone || '+977-41-520XXX'}</li>
                    <li><i class="fas fa-envelope mr-2"></i>${settings.email || 'info@hamromithila.com'}</li>
                `;
            }
        }

        // Frontend Rendering
        function renderFrontend() {
            renderNavigation();
            renderBreakingNews();
            renderFeaturedNews();
            renderCategorySections();
            renderTrendingNews();
            renderSidebarCategories();
            renderAds();
        }
        function renderNavigation() {
            const categories = DB.get('categories') || [];
            const navItems = categories.map(c => `<li><a href="#" onclick="filterByCategory('${c.name}')" class="block px-4 py-3 hover:bg-red-800">${c.name}</a></li>`).join('');
            document.getElementById('mainNav').innerHTML = `<li><a href="#" onclick="filterByCategory('all')" class="block px-4 py-3 hover:bg-red-800 bg-red-800">गृहपृष्ठ</a></li>` + navItems;
            document.getElementById('mobileNav').innerHTML = `<li><a href="#" onclick="filterByCategory('all')" class="block px-4 py-3 border-b hover:bg-gray-100">गृहपृष्ठ</a></li>` + categories.map(c => `<li><a href="#" onclick="filterByCategory('${c.name}')" class="block px-4 py-3 border-b hover:bg-gray-100">${c.name}</a></li>`).join('');
            document.getElementById('footerCategories').innerHTML = categories.slice(0, 4).map(c => `<li><a href="#" class="hover:text-white">${c.name}</a></li>`).join('');
        }
        function renderBreakingNews() {
            const breaking = DB.get('breakingNews') || [];
            const items = breaking.map(b => {
                if (b.articleId) {
                    return `<span class="mx-8 breaking-item" onclick="viewArticle(${b.articleId})">• ${b.text}</span>`;
                }
                return `<span class="mx-8">• ${b.text}</span>`;
            }).join('');
            document.getElementById('breakingTicker').innerHTML = items + items;
        }
        function renderFeaturedNews() {
            const news = (DB.get('news') || []).filter(n => n.published !== false);
            const featured = news.filter(n => n.featured).slice(0, 3);
            const container = document.getElementById('featuredNews');
            if (featured.length === 0) { container.innerHTML = '<p class="text-gray-500 col-span-2">No featured news.</p>'; return; }
            let html = '';
            if (featured[0]) {
                html += `<div class="md:col-span-2 bg-white rounded-lg shadow-md overflow-hidden news-card cursor-pointer" onclick="viewArticle(${featured[0].id})">
                    <div class="relative overflow-hidden"><img src="${featured[0].image}" alt="${featured[0].title}" class="w-full h-72 object-cover news-img">
                    <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4">
                        <span class="category-badge bg-red-600 text-white px-2 py-1 rounded">${featured[0].category}</span>
                        <h2 class="text-white text-xl md:text-2xl font-bold mt-2">${featured[0].title}</h2>
                        <p class="text-gray-300 text-sm mt-1">${timeAgo(featured[0].date)} • ${featured[0].authorName || 'Unknown'}</p>
                    </div></div></div>`;
            }
            featured.slice(1).forEach(n => {
                html += `<div class="bg-white rounded-lg shadow-md overflow-hidden news-card cursor-pointer" onclick="viewArticle(${n.id})">
                    <div class="relative overflow-hidden"><img src="${n.image}" alt="${n.title}" class="w-full h-48 object-cover news-img">
                    <span class="absolute top-2 left-2 category-badge bg-blue-600 text-white px-2 py-1 rounded">${n.category}</span></div>
                    <div class="p-4"><h3 class="font-bold text-gray-800 hover:text-red-600">${n.title}</h3><p class="text-gray-500 text-sm mt-2">${timeAgo(n.date)}</p></div></div>`;
            });
            container.innerHTML = html;
        }
        function renderCategorySections() {
            const news = (DB.get('news') || []).filter(n => n.published !== false);
            const categories = DB.get('categories') || [];
            let html = '';
            categories.slice(0, 3).forEach(cat => {
                const catNews = news.filter(n => n.category === cat.name).slice(0, 3);
                if (catNews.length === 0) return;
                html += `<section class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold text-gray-800 border-l-4 border-${cat.color}-600 pl-3">${cat.name}</h2>
                        <a href="#" onclick="filterByCategory('${cat.name}')" class="text-red-600 text-sm hover:underline">सबै हेर्नुहोस् →</a>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        ${catNews.map(n => `<div class="bg-white rounded-lg shadow-md overflow-hidden news-card cursor-pointer" onclick="viewArticle(${n.id})">
                            <div class="overflow-hidden"><img src="${n.image}" alt="${n.title}" class="w-full h-40 object-cover news-img"></div>
                            <div class="p-3"><h3 class="font-semibold text-gray-800 text-sm hover:text-red-600">${n.title}</h3><p class="text-gray-500 text-xs mt-2">${timeAgo(n.date)}</p></div>
                        </div>`).join('')}
                    </div>
                </section>`;
            });
            document.getElementById('categorySections').innerHTML = html;
        }
        function renderTrendingNews() {
            const news = (DB.get('news') || []).filter(n => n.published !== false);
            const trending = news.filter(n => n.trending).slice(0, 5);
            const nepaliNums = ['१', '२', '३', '४', '५'];
            document.getElementById('trendingNews').innerHTML = trending.map((n, i) => `
                <div class="flex gap-3 cursor-pointer group" onclick="viewArticle(${n.id})">
                    <span class="text-2xl font-bold text-red-${6-i}00">${nepaliNums[i]}</span>
                    <p class="text-sm text-gray-700 group-hover:text-red-600">${n.title}</p>
                </div>
            `).join('') || '<p class="text-gray-500 text-sm">No trending news.</p>';
        }
        function renderSidebarCategories() {
            const categories = DB.get('categories') || [];
            document.getElementById('sidebarCategories').innerHTML = categories.map(c => `<a href="#" onclick="filterByCategory('${c.name}')" class="bg-gray-100 hover:bg-red-600 hover:text-white px-3 py-1 rounded-full text-sm transition">${c.name}</a>`).join('');
        }
        function renderAds() {
            const ads = (DB.get('ads') || []).filter(a => a.active);
            const sidebarAds = ads.filter(a => a.placement === 'sidebar');
            const headerAds = ads.filter(a => a.placement === 'header');
            const footerAds = ads.filter(a => a.placement === 'footer');
            const articleAds = ads.filter(a => a.placement === 'article');
            
            // Sidebar Ad
            if (sidebarAds.length > 0) {
                const ad = sidebarAds[0];
                document.getElementById('sidebarAdContainer').innerHTML = `
                    <a href="${ad.link}" target="_blank" onclick="trackAdClick(${ad.id})" class="block ad-banner">
                        <img src="${ad.image}" alt="${ad.title}" class="w-full rounded-lg shadow-md" onerror="this.parentElement.style.display='none'">
                        <p class="text-xs text-gray-400 text-center mt-1">विज्ञापन</p>
                    </a>`;
            } else {
                document.getElementById('sidebarAdContainer').innerHTML = `<div class="bg-gray-200 rounded-lg p-4 text-center"><p class="text-gray-500 text-sm">विज्ञापन</p><div class="h-48 flex items-center justify-center border-2 border-dashed border-gray-300 mt-2 rounded"><span class="text-gray-400">300x250</span></div></div>`;
            }
            
            // Header Ad
            if (headerAds.length > 0) {
                const ad = headerAds[0];
                document.getElementById('headerAdContainer').innerHTML = `
                    <a href="${ad.link}" target="_blank" onclick="trackAdClick(${ad.id})" class="block ad-banner text-center">
                        <img src="${ad.image}" alt="${ad.title}" class="max-w-full mx-auto rounded shadow" style="max-height:90px" onerror="this.parentElement.style.display='none'">
                    </a>`;
            } else {
                document.getElementById('headerAdContainer').innerHTML = '';
            }
            
            // Footer Ad
            if (footerAds.length > 0) {
                const ad = footerAds[0];
                document.getElementById('footerAdContainer').innerHTML = `
                    <a href="${ad.link}" target="_blank" onclick="trackAdClick(${ad.id})" class="block ad-banner text-center">
                        <img src="${ad.image}" alt="${ad.title}" class="max-w-full mx-auto rounded shadow" style="max-height:90px" onerror="this.parentElement.style.display='none'">
                        <p class="text-xs text-gray-400 mt-1">विज्ञापन</p>
                    </a>`;
            } else {
                document.getElementById('footerAdContainer').innerHTML = '';
            }
        }

        // Share Functions
        let currentArticleForShare = null;
        
        function getShareUrl() {
            return window.location.href.split('?')[0] + '?article=' + currentArticleForShare?.id;
        }
        
        function getShareText() {
            return currentArticleForShare?.title || 'Check out this news from Hamro Mithila';
        }
        
        function shareToFacebook() {
            const url = encodeURIComponent(getShareUrl());
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=600,height=400');
        }
        
        function shareToTwitter() {
            const url = encodeURIComponent(getShareUrl());
            const text = encodeURIComponent(getShareText());
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank', 'width=600,height=400');
        }
        
        function shareToWhatsApp() {
            const url = encodeURIComponent(getShareUrl());
            const text = encodeURIComponent(getShareText() + ' - ');
            window.open(`https://wa.me/?text=${text}${url}`, '_blank');
        }
        
        function shareToTelegram() {
            const url = encodeURIComponent(getShareUrl());
            const text = encodeURIComponent(getShareText());
            window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank', 'width=600,height=400');
        }
        
        function shareToLinkedIn() {
            const url = encodeURIComponent(getShareUrl());
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${url}`, '_blank', 'width=600,height=400');
        }
        
        function shareToViber() {
            const url = encodeURIComponent(getShareUrl());
            const text = encodeURIComponent(getShareText() + ' - ');
            window.open(`viber://forward?text=${text}${url}`, '_blank');
        }
        
        function shareByEmail() {
            const subject = encodeURIComponent(getShareText());
            const body = encodeURIComponent(`Check out this news article from Hamro Mithila:\n\n${getShareText()}\n\n${getShareUrl()}`);
            window.location.href = `mailto:?subject=${subject}&body=${body}`;
        }
        
        function copyArticleLink() {
            const url = getShareUrl();
            navigator.clipboard.writeText(url).then(() => {
                const btn = document.getElementById('copyLinkBtn');
                const originalHtml = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i><span class="hidden sm:inline">Copied!</span>';
                btn.classList.remove('bg-gray-800');
                btn.classList.add('bg-green-600');
                setTimeout(() => {
                    btn.innerHTML = originalHtml;
                    btn.classList.remove('bg-green-600');
                    btn.classList.add('bg-gray-800');
                }, 2000);
                showToast('Link copied to clipboard!', 'success');
            }).catch(() => {
                showToast('Failed to copy link', 'error');
            });
        }
        
        function nativeShare() {
            if (navigator.share) {
                navigator.share({
                    title: getShareText(),
                    text: getShareText(),
                    url: getShareUrl()
                }).catch(console.error);
            }
        }

        // Article View
        function viewArticle(id) {
            const news = DB.get('news');
            const article = news.find(n => n.id === id);
            if (!article) return;
            currentArticleForShare = article;
            article.views = (article.views || 0) + 1;
            DB.set('news', news);
            document.getElementById('articleImage').src = article.image;
            document.getElementById('articleCategory').textContent = article.category;
            document.getElementById('articleTitle').textContent = article.title;
            document.getElementById('articleAuthor').textContent = article.authorName || 'Unknown';
            document.getElementById('articleDate').textContent = formatDate(article.date);
            document.getElementById('articleViews').textContent = article.views;
            document.getElementById('articleContent').innerHTML = article.content.replace(/\n/g, '<br>');
            document.getElementById('commentArticleId').value = id;
            
            // In-article ad
            const ads = (DB.get('ads') || []).filter(a => a.active && a.placement === 'article');
            if (ads.length > 0) {
                const ad = ads[0];
                document.getElementById('articleAdContainer').innerHTML = `
                    <a href="${ad.link}" target="_blank" onclick="trackAdClick(${ad.id})" class="block text-center">
                        <img src="${ad.image}" alt="${ad.title}" class="max-w-full mx-auto rounded shadow" onerror="this.parentElement.style.display='none'">
                        <p class="text-xs text-gray-400 mt-1">विज्ञापन</p>
                    </a>`;
            } else {
                document.getElementById('articleAdContainer').innerHTML = '';
            }
            
            loadComments(id);
            document.getElementById('articleModal').classList.remove('hidden');
        }
        function closeArticleModal() { document.getElementById('articleModal').classList.add('hidden'); }

        // Comments
        function loadComments(articleId) {
            const comments = (DB.get('comments') || []).filter(c => c.articleId === articleId);
            document.getElementById('commentsContainer').innerHTML = comments.length ? comments.map(c => `
                <div class="bg-gray-100 p-3 rounded">
                    <div class="flex justify-between items-center mb-1"><span class="font-semibold text-sm">${c.name}</span><span class="text-xs text-gray-500">${timeAgo(c.date)}</span></div>
                    <p class="text-gray-700 text-sm">${c.text}</p>
                </div>
            `).join('') : '<p class="text-gray-500 text-sm">No comments yet.</p>';
        }
        function addComment(e) {
            e.preventDefault();
            const comments = DB.get('comments') || [];
            comments.push({ id: Date.now(), articleId: parseInt(document.getElementById('commentArticleId').value), name: document.getElementById('commentName').value, text: document.getElementById('commentText').value, date: new Date().toISOString() });
            DB.set('comments', comments);
            document.getElementById('commentName').value = '';
            document.getElementById('commentText').value = '';
            loadComments(parseInt(document.getElementById('commentArticleId').value));
            showToast('Comment added!', 'success');
        }

        // Search & Filter
        function searchNews(e) { if (e.key === 'Enter') performSearch(); }
        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query) { renderFrontend(); return; }
            const news = (DB.get('news') || []).filter(n => n.published !== false);
            const results = news.filter(n => n.title.toLowerCase().includes(query) || n.content.toLowerCase().includes(query));
            document.getElementById('featuredNews').innerHTML = results.length ? results.map(n => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden news-card cursor-pointer" onclick="viewArticle(${n.id})">
                    <div class="relative overflow-hidden"><img src="${n.image}" alt="${n.title}" class="w-full h-48 object-cover news-img">
                    <span class="absolute top-2 left-2 category-badge bg-red-600 text-white px-2 py-1 rounded">${n.category}</span></div>
                    <div class="p-4"><h3 class="font-bold text-gray-800 hover:text-red-600">${n.title}</h3><p class="text-gray-500 text-sm mt-2">${timeAgo(n.date)}</p></div>
                </div>
            `).join('') : '<p class="text-gray-500 col-span-2">No results found.</p>';
            document.getElementById('categorySections').innerHTML = '';
        }
        function filterByCategory(category) {
            if (category === 'all') { renderFrontend(); return; }
            const news = (DB.get('news') || []).filter(n => n.published !== false);
            const filtered = news.filter(n => n.category === category);
            document.getElementById('featuredNews').innerHTML = filtered.length ? filtered.map(n => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden news-card cursor-pointer" onclick="viewArticle(${n.id})">
                    <div class="relative overflow-hidden"><img src="${n.image}" alt="${n.title}" class="w-full h-48 object-cover news-img">
                    <span class="absolute top-2 left-2 category-badge bg-red-600 text-white px-2 py-1 rounded">${n.category}</span></div>
                    <div class="p-4"><h3 class="font-bold text-gray-800 hover:text-red-600">${n.title}</h3><p class="text-gray-500 text-sm mt-2">${timeAgo(n.date)}</p></div>
                </div>
            `).join('') : '<p class="text-gray-500 col-span-2">No news in this category.</p>';
            document.getElementById('categorySections').innerHTML = `<div class="flex items-center mb-4"><h2 class="text-xl font-bold text-gray-800 border-l-4 border-red-600 pl-3">${category}</h2></div>`;
            toggleMobileMenu();
        }

        // Utilities
        function formatDate(dateStr) { return new Date(dateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }); }
        function formatDateTime(dateStr) { return new Date(dateStr).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' }); }
        function timeAgo(dateStr) {
            const seconds = Math.floor((new Date() - new Date(dateStr)) / 1000);
            const intervals = { 'वर्ष': 31536000, 'महिना': 2592000, 'हप्ता': 604800, 'दिन': 86400, 'घण्टा': 3600, 'मिनेट': 60 };
            for (const [unit, sec] of Object.entries(intervals)) { const interval = Math.floor(seconds / sec); if (interval >= 1) return `${interval} ${unit} अघि`; }
            return 'अहिले';
        }
        function toggleMobileMenu() { document.getElementById('mobileMenu').classList.toggle('hidden'); }
        function updateDateTime() {
            const now = new Date();
            const days = ['आइतबार', 'सोमबार', 'मंगलबार', 'बुधबार', 'बिहीबार', 'शुक्रबार', 'शनिबार'];
            document.getElementById('currentDate').textContent = days[now.getDay()] + ', ' + now.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
        }

        // Image Upload Functions
        function handleImageUpload(input, urlFieldId, previewContainerId) {
            const file = input.files[0];
            if (!file) return;
            
            // Check file size (150MB limit)
            const maxSize = 150 * 1024 * 1024; // 150MB in bytes
            if (file.size > maxSize) {
                showToast('File too large! Maximum size is 150MB.', 'error');
                input.value = '';
                return;
            }
            
            // Check file type
            if (!file.type.startsWith('image/')) {
                showToast('Please select an image file!', 'error');
                input.value = '';
                return;
            }
            
            // Show loading
            showToast('Uploading image...', 'success');
            
            // Convert to base64
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result;
                document.getElementById(urlFieldId).value = base64;
                
                // Show preview
                const previewContainer = document.getElementById(previewContainerId);
                const previewImg = previewContainer.querySelector('img');
                previewImg.src = base64;
                previewContainer.classList.remove('hidden');
                
                showToast('Image uploaded successfully!', 'success');
            };
            reader.onerror = function() {
                showToast('Error reading file!', 'error');
            };
            reader.readAsDataURL(file);
        }
        
        function previewImageUrl(url, previewContainerId) {
            if (!url) {
                document.getElementById(previewContainerId).classList.add('hidden');
                return;
            }
            const previewContainer = document.getElementById(previewContainerId);
            const previewImg = previewContainer.querySelector('img');
            previewImg.src = url;
            previewImg.onload = function() {
                previewContainer.classList.remove('hidden');
            };
            previewImg.onerror = function() {
                previewContainer.classList.add('hidden');
                showToast('Invalid image URL!', 'error');
            };
        }
        
        function clearImagePreview(urlFieldId, uploadFieldId, previewContainerId) {
            document.getElementById(urlFieldId).value = '';
            if (document.getElementById(uploadFieldId)) {
                document.getElementById(uploadFieldId).value = '';
            }
            document.getElementById(previewContainerId).classList.add('hidden');
        }

        // Image preview for ad form
        document.getElementById('adImage')?.addEventListener('input', function() {
            const url = this.value;
            if (url) {
                document.getElementById('adPreviewImg').src = url;
                document.getElementById('adPreview').classList.remove('hidden');
            } else {
                document.getElementById('adPreview').classList.add('hidden');
            }
        });

        // Logo & Branding Functions
        function handleLogoUpload(input) {
            const file = input.files[0];
            if (!file) return;
            
            const maxSize = 150 * 1024 * 1024;
            if (file.size > maxSize) {
                showToast('File too large! Maximum size is 150MB.', 'error');
                input.value = '';
                return;
            }
            
            if (!file.type.startsWith('image/')) {
                showToast('Please select an image file!', 'error');
                input.value = '';
                return;
            }
            
            showToast('Uploading logo...', 'success');
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64 = e.target.result;
                document.getElementById('logoUrl').value = base64;
                document.getElementById('logoPreviewImg').src = base64;
                document.getElementById('headerPreviewLogo').src = base64;
                showToast('Logo uploaded successfully!', 'success');
            };
            reader.onerror = function() {
                showToast('Error reading file!', 'error');
            };
            reader.readAsDataURL(file);
        }
        
        function previewLogoUrl(url) {
            if (!url) return;
            document.getElementById('logoPreviewImg').src = url;
            document.getElementById('headerPreviewLogo').src = url;
        }
        
        function resetLogo() {
            const defaultLogo = 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg';
            document.getElementById('logoUrl').value = '';
            document.getElementById('logoUpload').value = '';
            document.getElementById('logoPreviewImg').src = defaultLogo;
            document.getElementById('headerPreviewLogo').src = defaultLogo;
            showToast('Logo reset to default!', 'success');
        }
        
        function saveLogoAndBranding(e) {
            e.preventDefault();
            
            const branding = {
                logo: document.getElementById('logoUrl').value || 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg',
                title: document.getElementById('newspaperTitle').value || 'Hamro Mithila',
                logoText: document.getElementById('logoText').value || '',
                tagline: document.getElementById('newspaperTagline').value || 'मिथिलाको विश्वसनीय समाचार',
                showOverlay: document.getElementById('showLogoOverlay').checked,
                titleFont: document.getElementById('titleFont').value || "'Mukta', sans-serif",
                titleColor: document.getElementById('titleColor').value || '#b91c1c',
                taglineFont: document.getElementById('taglineFont').value || "'Mukta', sans-serif",
                taglineColor: document.getElementById('taglineColor').value || '#6b7280'
            };
            
            DB.set('branding', branding);
            logActivity('Updated logo and branding', 'settings');
            renderBranding();
            showToast('Logo & Branding saved successfully!', 'success');
        }
        
        // Color sync functions
        function syncTitleColor(value) {
            if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                document.getElementById('titleColor').value = value;
                updateLivePreview();
            }
        }
        
        function syncTaglineColor(value) {
            if (/^#[0-9A-Fa-f]{6}$/.test(value)) {
                document.getElementById('taglineColor').value = value;
                updateLivePreview();
            }
        }
        
        function updateLivePreview() {
            const title = document.getElementById('newspaperTitle').value || 'Hamro Mithila';
            const logoText = document.getElementById('logoText').value || 'हमि';
            const tagline = document.getElementById('newspaperTagline').value || 'मिथिलाको विश्वसनीय समाचार';
            const titleFont = document.getElementById('titleFont').value;
            const titleColor = document.getElementById('titleColor').value;
            const taglineFont = document.getElementById('taglineFont').value;
            const taglineColor = document.getElementById('taglineColor').value;
            const showOverlay = document.getElementById('showLogoOverlay').checked;
            
            // Update text previews
            document.getElementById('headerPreviewTitle').textContent = title;
            document.getElementById('headerPreviewTitle').style.fontFamily = titleFont;
            document.getElementById('headerPreviewTitle').style.color = titleColor;
            
            document.getElementById('headerPreviewLogoText').textContent = logoText;
            
            document.getElementById('headerPreviewTagline').textContent = tagline;
            document.getElementById('headerPreviewTagline').style.fontFamily = taglineFont;
            document.getElementById('headerPreviewTagline').style.color = taglineColor;
            
            // Update overlay visibility
            document.getElementById('headerPreviewOverlay').style.display = showOverlay ? '' : 'none';
            document.getElementById('logoOverlay').style.display = showOverlay ? '' : 'none';
            
            // Update color text inputs
            document.getElementById('titleColorText').value = titleColor;
            document.getElementById('taglineColorText').value = taglineColor;
        }
        
        function loadBrandingForm() {
            const branding = DB.get('branding') || {};
            const defaultLogo = 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg';
            
            document.getElementById('logoUrl').value = branding.logo || '';
            document.getElementById('newspaperTitle').value = branding.title || 'Hamro Mithila';
            document.getElementById('logoText').value = branding.logoText || 'हमि';
            document.getElementById('newspaperTagline').value = branding.tagline || 'मिथिलाको विश्वसनीय समाचार';
            document.getElementById('showLogoOverlay').checked = branding.showOverlay !== false;
            
            // Load font and color settings
            document.getElementById('titleFont').value = branding.titleFont || "'Mukta', sans-serif";
            document.getElementById('titleColor').value = branding.titleColor || '#b91c1c';
            document.getElementById('titleColorText').value = branding.titleColor || '#b91c1c';
            document.getElementById('taglineFont').value = branding.taglineFont || "'Mukta', sans-serif";
            document.getElementById('taglineColor').value = branding.taglineColor || '#6b7280';
            document.getElementById('taglineColorText').value = branding.taglineColor || '#6b7280';
            
            // Update previews
            document.getElementById('logoPreviewImg').src = branding.logo || defaultLogo;
            document.getElementById('headerPreviewLogo').src = branding.logo || defaultLogo;
            document.getElementById('headerPreviewTitle').textContent = branding.title || 'Hamro Mithila';
            document.getElementById('headerPreviewLogoText').textContent = branding.logoText || 'हमि';
            document.getElementById('headerPreviewTagline').textContent = branding.tagline || 'मिथिलाको विश्वसनीय समाचार';
            
            // Live preview updates
            document.getElementById('newspaperTitle')?.addEventListener('input', function() {
                document.getElementById('headerPreviewTitle').textContent = this.value || 'Hamro Mithila';
            });
            document.getElementById('logoText')?.addEventListener('input', function() {
                document.getElementById('headerPreviewLogoText').textContent = this.value || 'हमि';
            });
            document.getElementById('newspaperTagline')?.addEventListener('input', function() {
                document.getElementById('headerPreviewTagline').textContent = this.value || 'मिथिलाको विश्वसनीय समाचार';
            });
            document.getElementById('showLogoOverlay')?.addEventListener('change', function() {
                document.getElementById('headerPreviewOverlay').style.display = this.checked ? '' : 'none';
                document.getElementById('logoOverlay').style.display = this.checked ? '' : 'none';
            });
        }
        
        // Contact Info Functions
        function saveContactInfo(e) {
            e.preventDefault();
            const contactInfo = {
                address: document.getElementById('contactAddress').value || 'जनकपुरधाम, मधेश प्रदेश',
                phone: document.getElementById('contactPhone').value || '+977-41-520XXX',
                email: document.getElementById('contactEmail').value || 'info@hamromithila.com',
                mobile: document.getElementById('contactMobile').value || '',
                fax: document.getElementById('contactFax').value || '',
                pobox: document.getElementById('contactPOBox').value || '',
                hours: document.getElementById('contactHours').value || ''
            };
            DB.set('contactInfo', contactInfo);
            logActivity('Updated contact information', 'settings');
            renderContactInfo();
            showToast('Contact information saved successfully!', 'success');
        }
        
        function loadContactInfoForm() {
            const contact = DB.get('contactInfo') || {};
            document.getElementById('contactAddress').value = contact.address || 'जनकपुरधाम, मधेश प्रदेश';
            document.getElementById('contactPhone').value = contact.phone || '+977-41-520XXX';
            document.getElementById('contactEmail').value = contact.email || 'info@hamromithila.com';
            document.getElementById('contactMobile').value = contact.mobile || '';
            document.getElementById('contactFax').value = contact.fax || '';
            document.getElementById('contactPOBox').value = contact.pobox || '';
            document.getElementById('contactHours').value = contact.hours || '';
            
            // Add live preview listeners
            document.getElementById('contactAddress').addEventListener('input', updateContactPreview);
            document.getElementById('contactPhone').addEventListener('input', updateContactPreview);
            document.getElementById('contactEmail').addEventListener('input', updateContactPreview);
            updateContactPreview();
        }
        
        function updateContactPreview() {
            document.getElementById('previewAddress').textContent = document.getElementById('contactAddress').value || 'जनकपुरधाम, मधेश प्रदेश';
            document.getElementById('previewPhone').textContent = document.getElementById('contactPhone').value || '+977-41-520XXX';
            document.getElementById('previewEmail').textContent = document.getElementById('contactEmail').value || 'info@hamromithila.com';
        }
        
        function renderContactInfo() {
            const contact = DB.get('contactInfo') || {};
            document.getElementById('footerAddress').textContent = contact.address || 'जनकपुरधाम, मधेश प्रदेश';
            document.getElementById('footerPhone').textContent = contact.phone || '+977-41-520XXX';
            document.getElementById('footerEmail').textContent = contact.email || 'info@hamromithila.com';
        }

        // Footer Settings Functions
        function saveFooterSettings(e) {
            e.preventDefault();
            const footerSettings = {
                copyrightYear: document.getElementById('footerCopyrightYear').value || '2024',
                copyrightText: document.getElementById('footerCopyrightText').value || 'सर्वाधिकार सुरक्षित।',
                portalName: document.getElementById('footerPortalName').value || 'Hamro Mithila',
                aboutText: document.getElementById('footerAboutText').value || 'मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।',
                quickLinks: [
                    { title: document.getElementById('footerLink1').value || 'हाम्रो बारेमा', content: document.getElementById('footerLink1Content').value || '' },
                    { title: document.getElementById('footerLink2').value || 'सम्पर्क', content: document.getElementById('footerLink2Content').value || '' },
                    { title: document.getElementById('footerLink3').value || 'विज्ञापन', content: document.getElementById('footerLink3Content').value || '' },
                    { title: document.getElementById('footerLink4').value || 'गोपनीयता नीति', content: document.getElementById('footerLink4Content').value || '' },
                    { title: document.getElementById('footerLink5').value || '', content: document.getElementById('footerLink5Content').value || '' },
                    { title: document.getElementById('footerLink6').value || '', content: document.getElementById('footerLink6Content').value || '' }
                ]
            };
            DB.set('footerSettings', footerSettings);
            logActivity('Updated footer settings', 'settings');
            renderFooterSettings();
            showToast('Footer settings saved successfully!', 'success');
        }
        
        function loadFooterSettingsForm() {
            const settings = DB.get('footerSettings') || {};
            document.getElementById('footerCopyrightYear').value = settings.copyrightYear || '2024';
            document.getElementById('footerCopyrightText').value = settings.copyrightText || 'सर्वाधिकार सुरक्षित।';
            document.getElementById('footerPortalName').value = settings.portalName || 'Hamro Mithila';
            document.getElementById('footerAboutText').value = settings.aboutText || 'मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।';
            
            const links = settings.quickLinks || [];
            // Check if it's old format (array of strings) or new format (array of objects)
            if (links.length > 0 && typeof links[0] === 'string') {
                // Old format - just titles
                document.getElementById('footerLink1').value = links[0] || 'हाम्रो बारेमा';
                document.getElementById('footerLink2').value = links[1] || 'सम्पर्क';
                document.getElementById('footerLink3').value = links[2] || 'विज्ञापन';
                document.getElementById('footerLink4').value = links[3] || 'गोपनीयता नीति';
                document.getElementById('footerLink5').value = links[4] || 'सेवाका सर्तहरू';
                document.getElementById('footerLink6').value = links[5] || 'क्यारियर';
            } else {
                // New format with content
                document.getElementById('footerLink1').value = links[0]?.title || 'हाम्रो बारेमा';
                document.getElementById('footerLink1Content').value = links[0]?.content || '';
                document.getElementById('footerLink2').value = links[1]?.title || 'सम्पर्क';
                document.getElementById('footerLink2Content').value = links[1]?.content || '';
                document.getElementById('footerLink3').value = links[2]?.title || 'विज्ञापन';
                document.getElementById('footerLink3Content').value = links[2]?.content || '';
                document.getElementById('footerLink4').value = links[3]?.title || 'गोपनीयता नीति';
                document.getElementById('footerLink4Content').value = links[3]?.content || '';
                document.getElementById('footerLink5').value = links[4]?.title || 'सेवाका सर्तहरू';
                document.getElementById('footerLink5Content').value = links[4]?.content || '';
                document.getElementById('footerLink6').value = links[5]?.title || 'क्यारियर';
                document.getElementById('footerLink6Content').value = links[5]?.content || '';
            }
            
            // Add live preview listeners
            const inputs = ['footerCopyrightYear', 'footerCopyrightText', 'footerPortalName', 'footerAboutText', 
                          'footerLink1', 'footerLink2', 'footerLink3', 'footerLink4', 'footerLink5', 'footerLink6'];
            inputs.forEach(id => {
                document.getElementById(id)?.addEventListener('input', updateFooterPreview);
            });
            updateFooterPreview();
        }
        
        function updateFooterPreview() {
            const year = document.getElementById('footerCopyrightYear').value || '2024';
            const text = document.getElementById('footerCopyrightText').value || 'सर्वाधिकार सुरक्षित।';
            const name = document.getElementById('footerPortalName').value || 'Hamro Mithila';
            const about = document.getElementById('footerAboutText').value || 'मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।';
            
            document.getElementById('previewPortalName').textContent = name;
            document.getElementById('previewAboutText').textContent = about;
            document.getElementById('previewCopyright').textContent = `© ${year} ${name}. ${text}`;
            
            // Update quick links preview
            const link1 = document.getElementById('footerLink1').value || 'हाम्रो बारेमा';
            const link2 = document.getElementById('footerLink2').value || 'सम्पर्क';
            const link3 = document.getElementById('footerLink3').value || 'विज्ञापन';
            const link4 = document.getElementById('footerLink4').value || 'गोपनीयता नीति';
            
            document.getElementById('previewQuickLinks').innerHTML = `
                <li>${link1}</li>
                <li>${link2}</li>
                <li>${link3}</li>
                <li>${link4}</li>
            `;
        }
        
        function renderFooterSettings() {
            const settings = DB.get('footerSettings') || {};
            const year = settings.copyrightYear || '2024';
            const text = settings.copyrightText || 'सर्वाधिकार सुरक्षित।';
            const name = settings.portalName || 'Hamro Mithila';
            const about = settings.aboutText || 'मिथिला क्षेत्रको विश्वसनीय र निष्पक्ष समाचार स्रोत।';
            const links = settings.quickLinks || [];
            
            // Update copyright line
            document.getElementById('footerCopyrightLine').textContent = `© ${year} ${name}. ${text}`;
            
            // Update about description
            document.getElementById('footerAboutDesc').textContent = about;
            
            // Update quick links - only show non-empty links
            let quickLinksHtml = '';
            links.forEach((link, index) => {
                const title = typeof link === 'string' ? link : link?.title;
                if (title && title.trim() !== '') {
                    quickLinksHtml += `<li><a href="#" onclick="openFooterPage(${index}); return false;" class="hover:text-white cursor-pointer">${title}</a></li>`;
                }
            });
            document.getElementById('footerQuickLinks').innerHTML = quickLinksHtml || `
                <li><a href="#" onclick="openFooterPage(0); return false;" class="hover:text-white cursor-pointer">हाम्रो बारेमा</a></li>
                <li><a href="#" onclick="openFooterPage(1); return false;" class="hover:text-white cursor-pointer">सम्पर्क</a></li>
                <li><a href="#" onclick="openFooterPage(2); return false;" class="hover:text-white cursor-pointer">विज्ञापन</a></li>
                <li><a href="#" onclick="openFooterPage(3); return false;" class="hover:text-white cursor-pointer">गोपनीयता नीति</a></li>
            `;
        }
        
        // Show footer page content in a modal
        function showFooterPageContent(index) {
            openFooterPage(index);
        }
        
        // Open footer page with full content
        function openFooterPage(index) {
            const settings = DB.get('footerSettings') || {};
            const links = settings.quickLinks || [];
            const branding = DB.get('branding') || {};
            const contact = DB.get('contactInfo') || {};
            const socialLinks = DB.get('socialLinks') || {};
            
            // Default page titles and content
            const defaultPages = [
                { 
                    title: 'हाम्रो बारेमा', 
                    content: `<h3 class="text-xl font-bold text-red-700 mb-4">Hamro Mithila बारेमा</h3>
                    <p>Hamro Mithila मिथिला क्षेत्रको अग्रणी र विश्वसनीय समाचार पोर्टल हो। हामी मिथिला क्षेत्रका हरेक समाचार, घटना र विकासलाई समेट्दै आएका छौं।</p>
                    <p class="mt-3">हाम्रो उद्देश्य भनेको मिथिला क्षेत्रको संस्कृति, परम्परा र विकासलाई विश्वव्यापी रूपमा प्रचारप्रसार गर्नु हो।</p>`
                },
                { 
                    title: 'सम्पर्क', 
                    content: `<h3 class="text-xl font-bold text-red-700 mb-4">हामीलाई सम्पर्क गर्नुहोस्</h3>
                    <div class="space-y-3">
                        <p><i class="fas fa-map-marker-alt text-red-500 mr-3 w-5"></i><strong>ठेगाना:</strong> ${contact.address || 'जनकपुरधाम, मधेश प्रदेश'}</p>
                        <p><i class="fas fa-phone text-green-500 mr-3 w-5"></i><strong>फोन:</strong> ${contact.phone || '+977-41-520XXX'}</p>
                        <p><i class="fas fa-envelope text-blue-500 mr-3 w-5"></i><strong>इमेल:</strong> ${contact.email || 'info@hamromithila.com'}</p>
                        ${contact.mobile ? `<p><i class="fas fa-mobile-alt text-purple-500 mr-3 w-5"></i><strong>मोबाइल:</strong> ${contact.mobile}</p>` : ''}
                        ${contact.hours ? `<p><i class="fas fa-clock text-yellow-500 mr-3 w-5"></i><strong>कार्यालय समय:</strong> ${contact.hours}</p>` : ''}
                    </div>`
                },
                { 
                    title: 'विज्ञापन', 
                    content: `<h3 class="text-xl font-bold text-red-700 mb-4">विज्ञापन सेवा</h3>
                    <p>Hamro Mithila मा विज्ञापन गर्न चाहनुहुन्छ? हामी विभिन्न प्रकारका विज्ञापन सेवाहरू प्रदान गर्दछौं:</p>
                    <ul class="list-disc ml-5 mt-3 space-y-2">
                        <li><strong>Header Banner (728x90):</strong> शीर्षमा प्रदर्शित</li>
                        <li><strong>Sidebar Ad (300x250):</strong> साइडबारमा प्रदर्शित</li>
                        <li><strong>Footer Banner (728x90):</strong> फुटरमा प्रदर्शित</li>
                        <li><strong>In-Article Ad:</strong> समाचार भित्र प्रदर्शित</li>
                    </ul>
                    <p class="mt-4">विज्ञापनको लागि सम्पर्क गर्नुहोस्: <strong>${contact.email || 'info@hamromithila.com'}</strong></p>`
                },
                { 
                    title: 'गोपनीयता नीति', 
                    content: `<h3 class="text-xl font-bold text-red-700 mb-4">गोपनीयता नीति</h3>
                    <p>Hamro Mithila मा तपाईंको गोपनीयता हाम्रो प्राथमिकता हो। यस पृष्ठमा हामीले कसरी तपाईंको जानकारी सङ्कलन, प्रयोग र सुरक्षित गर्छौं भन्ने बारेमा वर्णन गरिएको छ।</p>
                    <h4 class="font-bold mt-4 mb-2">जानकारी सङ्कलन</h4>
                    <p>हामी तपाईंको नाम, इमेल ठेगाना र टिप्पणीहरू मात्र सङ्कलन गर्छौं।</p>
                    <h4 class="font-bold mt-4 mb-2">जानकारी प्रयोग</h4>
                    <p>तपाईंको जानकारी केवल सेवा प्रदान गर्न प्रयोग गरिन्छ र कुनै पनि तेस्रो पक्षलाई बिक्री गरिँदैन।</p>`
                },
                { 
                    title: 'सेवाका सर्तहरू', 
                    content: `<h3 class="text-xl font-bold text-red-700 mb-4">सेवाका सर्तहरू</h3>
                    <p>Hamro Mithila वेबसाइट प्रयोग गर्दा तपाईंले निम्न सर्तहरू स्वीकार गर्नुहुन्छ:</p>
                    <ul class="list-disc ml-5 mt-3 space-y-2">
                        <li>सबै सामग्री Hamro Mithila को सम्पत्ति हो</li>
                        <li>सामग्री पुन: प्रकाशन गर्न अनुमति आवश्यक छ</li>
                        <li>टिप्पणीहरू सभ्य र आदरपूर्ण हुनुपर्छ</li>
                        <li>गैरकानूनी गतिविधिहरू निषेधित छन्</li>
                    </ul>`
                },
                { 
                    title: 'क्यारियर', 
                    content: `<h3 class="text-xl font-bold text-red-700 mb-4">क्यारियर अवसरहरू</h3>
                    <p>Hamro Mithila मा काम गर्न चाहनुहुन्छ? हामी प्रतिभाशाली व्यक्तिहरूको खोजीमा छौं!</p>
                    <h4 class="font-bold mt-4 mb-2">हालका रिक्त पदहरू:</h4>
                    <ul class="list-disc ml-5 space-y-2">
                        <li>पत्रकार (Reporter)</li>
                        <li>सम्पादक (Editor)</li>
                        <li>भिडियो निर्माता (Video Producer)</li>
                        <li>सामाजिक सञ्जाल प्रबन्धक (Social Media Manager)</li>
                    </ul>
                    <p class="mt-4">आवेदन पठाउनुहोस्: <strong>${contact.email || 'info@hamromithila.com'}</strong></p>`
                }
            ];
            
            // Get saved content or use default
            let pageTitle = defaultPages[index]?.title || 'पृष्ठ';
            let pageContent = defaultPages[index]?.content || '';
            
            // Check if admin has saved custom content
            if (links[index]) {
                const link = links[index];
                const savedTitle = typeof link === 'string' ? link : link?.title;
                const savedContent = typeof link === 'object' ? link?.content : '';
                
                if (savedTitle) pageTitle = savedTitle;
                if (savedContent && savedContent.trim() !== '') {
                    pageContent = `<div class="whitespace-pre-wrap">${savedContent}</div>`;
                }
            }
            
            // Remove existing modal if any
            const existingModal = document.getElementById('footerPageModal');
            if (existingModal) existingModal.remove();
            
            // Create full page modal
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 overflow-y-auto';
            modal.id = 'footerPageModal';
            modal.innerHTML = `
                <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full my-8 overflow-hidden animate-fadeIn">
                    <!-- Header -->
                    <div class="bg-gradient-to-r from-red-700 via-red-600 to-red-700 text-white p-6">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center">
                                    <i class="fas fa-file-alt text-2xl"></i>
                                </div>
                                <div>
                                    <h2 class="text-2xl font-bold">${pageTitle}</h2>
                                    <p class="text-red-200 text-sm">${branding.title || 'Hamro Mithila'}</p>
                                </div>
                            </div>
                            <button onclick="document.getElementById('footerPageModal').remove()" class="w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center transition">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Content -->
                    <div class="p-8">
                        <div class="prose max-w-none text-gray-700 leading-relaxed">
                            ${pageContent}
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div class="bg-gray-100 px-8 py-4 border-t">
                        <div class="flex flex-wrap justify-between items-center gap-4">
                            <div class="flex items-center gap-4 text-gray-500 text-sm">
                                <span><i class="fas fa-globe mr-1"></i> ${branding.title || 'Hamro Mithila'}</span>
                                <span><i class="fas fa-envelope mr-1"></i> ${contact.email || 'info@hamromithila.com'}</span>
                            </div>
                            <button onclick="document.getElementById('footerPageModal').remove()" class="bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition flex items-center gap-2">
                                <i class="fas fa-arrow-left"></i> फिर्ता जानुहोस्
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });
            
            // Close on Escape key
            const escHandler = (e) => {
                if (e.key === 'Escape') {
                    modal.remove();
                    document.removeEventListener('keydown', escHandler);
                }
            };
            document.addEventListener('keydown', escHandler);
        }

        function renderBranding() {
            const branding = DB.get('branding') || {};
            const defaultLogo = 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Janaki_Mandir%2CJanakpur.jpg/1200px-Janaki_Mandir%2CJanakpur.jpg';
            
            const logo = branding.logo || defaultLogo;
            const title = branding.title || 'Hamro Mithila';
            const tagline = branding.tagline || 'मिथिलाको विश्वसनीय समाचार पोर्टल';
            const showOverlay = branding.showOverlay !== false;
            const titleColor = branding.titleColor || '';
            const titleFont = branding.titleFont || '';
            const taglineColor = branding.taglineColor || '';
            const taglineFont = branding.taglineFont || '';
            
            // Update header logo image
            const headerLogoImg = document.getElementById('headerLogoImg');
            if (headerLogoImg) headerLogoImg.src = logo;
            
            // Update header title
            const headerTitle = document.getElementById('headerTitleText');
            if (headerTitle) {
                headerTitle.textContent = title;
                if (titleColor) {
                    headerTitle.style.color = titleColor;
                    headerTitle.style.background = 'none';
                    headerTitle.style.webkitBackgroundClip = 'unset';
                    headerTitle.style.webkitTextFillColor = titleColor;
                }
                if (titleFont) headerTitle.style.fontFamily = titleFont;
            }
            
            // Update header tagline
            const headerTagline = document.getElementById('headerTaglineText');
            if (headerTagline) {
                const taglineSpan = headerTagline.querySelector('span');
                if (taglineSpan) {
                    taglineSpan.textContent = tagline;
                }
                if (taglineColor) headerTagline.style.color = taglineColor;
                if (taglineFont) headerTagline.style.fontFamily = taglineFont;
            }
            
            // Update header overlay
            const headerOverlay = document.getElementById('headerLogoOverlay');
            if (headerOverlay) {
                headerOverlay.style.display = showOverlay ? '' : 'none';
            }
            
            // Update footer logo image
            const footerLogoImg = document.getElementById('footerLogoImg');
            if (footerLogoImg) footerLogoImg.src = logo;
            
            // Update footer title
            const footerTitle = document.getElementById('footerTitleText');
            if (footerTitle) {
                footerTitle.textContent = title;
                if (titleColor) {
                    footerTitle.style.color = titleColor;
                    footerTitle.style.background = 'none';
                    footerTitle.style.webkitBackgroundClip = 'unset';
                    footerTitle.style.webkitTextFillColor = titleColor;
                }
            }
            
            // Update footer overlay
            const footerOverlay = document.getElementById('footerLogoOverlay');
            if (footerOverlay) {
                footerOverlay.style.display = showOverlay ? '' : 'none';
            }
            
            // Update page title
            document.title = `${title} - ${tagline}`;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initializeData();
            renderFrontend();
            renderSocialLinks();
            renderBranding();
            renderContactInfo();
            renderFooterSettings();
            updateDateTime();
            setInterval(updateDateTime, 1000);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLoginModal(); closeNewsForm(); closeCategoryForm(); closeBreakingForm(); closeUserForm(); closeAdForm(); closeArticleModal();
            }
        });
    </script>
</body>
</html>
